<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1135px" preserveAspectRatio="none" style="width:1178px;height:1135px;background:#FFFFFF;" version="1.1" viewBox="0 0 1178 1135" width="1178px" zoomAndPan="magnify"><defs><filter height="300%" id="f12vdo70v57m" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="88" x="538.75" y="17.4023">Lift States</text><!--MD5=[97a2ad4198554bc8d8f2bd96e1202341]
cluster signable--><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="716" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="948" x="21.5" y="390.229"/><rect fill="#FFFFFF" height="689" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="942" x="24.5" y="414.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="21.5" x2="969.5" y1="411.229" y2="411.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="40" x="475.5" y="402.6992">signable</text><!--MD5=[89851823b7e3ac9d3f854527fa321abc]
cluster origin--><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="304" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="575" x="354.5" y="436.229"/><rect fill="#FFFFFF" height="257.8672" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="569" x="357.5" y="479.3618"/><line style="stroke:#202024;stroke-width:1.5;" x1="354.5" x2="929.5" y1="476.3618" y2="476.3618"/><line style="stroke:#202024;stroke-width:1.5;" x1="354.5" x2="929.5" y1="457.229" y2="457.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="512.5" y="448.6992">origin</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="259" x="359.5" y="471.3306">Should not get affirmed but might get voided</text><!--MD5=[4dc5522eab3f27dbb14e4d5b6f4371d5]
cluster relay--><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="304" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="277" x="53.5" y="436.229"/><rect fill="#FFFFFF" height="257.8672" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="271" x="56.5" y="479.3618"/><line style="stroke:#202024;stroke-width:1.5;" x1="53.5" x2="330.5" y1="476.3618" y2="476.3618"/><line style="stroke:#202024;stroke-width:1.5;" x1="53.5" x2="330.5" y1="457.229" y2="457.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="24" x="119" y="448.6992">relay</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="146" x="58.5" y="471.3306">Any non-originating node</text><g id="signable.call"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="164" x="673.5" y="854.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="673.5" x2="837.5" y1="875.229" y2="875.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="16" x="747.5" y="867.6992">call</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144" x="678.5" y="891.8306">Status: call, Request: null</text></g><g id="signable.callCall"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="163" x="674" y="1032.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="674" x2="837" y1="1053.229" y2="1053.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="35" x="738" y="1045.6992">call.call</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="143" x="679" y="1069.8306">Status: call, Request: call</text></g><g id="signable.origin.seek"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="172" x="569.5" y="485.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="569.5" x2="741.5" y1="506.229" y2="506.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="24" x="643.5" y="498.6992">seek</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="152" x="574.5" y="522.8306">Status: seek, Request: null</text></g><g id="signable.origin.seekCheck"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="185" x="403" y="674.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="403" x2="588" y1="695.229" y2="695.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="57" x="467" y="687.6992">seek.check</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="165" x="408" y="711.8306">Status: seek, Request: check</text></g><g id="signable.origin.seekCall"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="171" x="670" y="674.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="670" x2="841" y1="695.229" y2="695.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="43" x="734" y="687.6992">seek.call</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="151" x="675" y="711.8306">Status: seek, Request: call</text></g><g id="signable.relay.pend"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="175" x="104" y="485.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="104" x2="279" y1="506.229" y2="506.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="24" x="179.5" y="498.6992">pend</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="155" x="109" y="522.8306">Status: pend, Request: null</text></g><g id="signable.relay.pendCheck"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="188" x="97.5" y="674.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="97.5" x2="285.5" y1="695.229" y2="695.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="57" x="163" y="687.6992">pend.check</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="168" x="102.5" y="711.8306">Status: pend, Request: check</text></g><g id="draftInit"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="170" x="577.5" y="51.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="577.5" x2="747.5" y1="72.229" y2="72.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="38" x="643.5" y="64.6992">draft.init</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="150" x="582.5" y="88.8306">Status: draft, Request: init</text></g><g id="initSeek"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="169" x="654" y="229.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="654" x2="823" y1="250.229" y2="250.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="40" x="718.5" y="242.6992">init.seek</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="659" y="266.8306">Status: init, Request: seek</text></g><g id="draftRelay"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="181" x="7" y="229.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="7" x2="188" y1="250.229" y2="250.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="49" x="73" y="242.6992">draft.relay</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="161" x="12" y="266.8306">Status: draft, Request: relay</text></g><g id="draftFound"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="186" x="223.5" y="229.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="223.5" x2="409.5" y1="250.229" y2="250.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="52" x="290.5" y="242.6992">draft.found</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="166" x="228.5" y="266.8306">Status: draft, Request: found</text></g><g id="good"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="174" x="444.5" y="229.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="444.5" x2="618.5" y1="250.229" y2="250.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="24" x="519.5" y="242.6992">good</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154" x="449.5" y="266.8306">Status: good, Request: null</text></g><g id="void"><rect fill="#E8E8EA" filter="url(#f12vdo70v57m)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="169" x="994" y="674.229"/><line style="stroke:#202024;stroke-width:1.5;" x1="994" x2="1163" y1="695.229" y2="695.229"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="20" x="1068.5" y="687.6992">void</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="999" y="711.8306">Status: void, Request: null</text></g><ellipse cx="387.5" cy="76.229" fill="#44AAFF" filter="url(#f12vdo70v57m)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><ellipse cx="215.5" cy="76.229" fill="none" filter="url(#f12vdo70v57m)" rx="10" ry="10" style="stroke:#2277DD;stroke-width:1.0;"/><ellipse cx="216" cy="76.729" fill="#2277DD" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><!--MD5=[308a85f2e00e6107d378f5bcee9a465c]
link *start to draftInit--><path d="M394.07,84.199 C402.28,93.469 417.31,108.279 434,114.229 C456.4,122.219 517.49,117.819 541,114.229 C557.24,111.749 574.28,107.509 590.3,102.739 " fill="none" id="*start-to-draftInit" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="595.24,101.239,585.4675,100.0153,590.454,102.6863,587.7831,107.6728,595.24,101.239" style="stroke:#008000;stroke-width:1.0;"/><text fill="#008000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="27" x="474" y="88.6992">User:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="105" x="435" y="99.6992">User initiates linear lift</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="57" x="459" y="110.6992">Request:init</text><!--MD5=[308a85f2e00e6107d378f5bcee9a465c]
link *start to draftInit--><path d="M397.61,76.229 C425.76,76.229 507.21,76.229 572.43,76.229 " fill="none" id="*start-to-draftInit-1" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="577.49,76.229,568.49,72.229,572.49,76.229,568.49,80.229,577.49,76.229" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="31" x="472" y="47.6992">Agent:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="143" x="416" y="58.6992">Automaton initiates circular lift</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="57" x="459" y="69.6992">Request:init</text><!--MD5=[a06f9a57bd8aceb56702304eedc9b43c]
link draftInit to initSeek--><path d="M672.91,101.329 C686.74,133.369 711.16,189.909 725.98,224.239 " fill="none" id="draftInit-to-initSeek" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="728.1,229.139,728.1943,219.2906,726.1132,224.5507,720.8531,222.4695,728.1,229.139" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="751.5" y="146.1992">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="58" x="750.5" y="157.1992">init detected</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="130" x="714.5" y="168.1992">/Agent prepares Lift Object</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="98" x="730.5" y="179.1992">Encodes destination</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="68" x="745.5" y="190.1992">Request:seek</text><!--MD5=[39eccbf979fcee901bb2460e56aa5a61]
link initSeek to seek--><path d="M730.54,279.579 C715.2,326.519 681.61,429.329 665.08,479.929 " fill="none" id="initSeek-to-seek" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="663.43,484.949,670.0313,477.6399,664.9854,480.1971,662.4282,475.1512,663.43,484.949" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="736.5" y="318.6992">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="69" x="730" y="329.6992">seek detected</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="725" y="340.6992">/Send Upstream</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="72" x="728.5" y="351.6992">Action:promise</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="86" x="721.5" y="362.6992">Agent starts timer</text><!--MD5=[64d1d8889952e8a00e0e3ea68b831c86]
link seek to seekCall--><path d="M647.7,535.299 C640.08,563.569 632.3,610.829 652.5,644.229 C659.19,655.289 668.97,664.189 679.88,671.329 " fill="none" id="seek-to-seekCall" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="684.28,674.079,678.7754,665.912,680.0424,671.4252,674.5293,672.6922,684.28,674.079" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="706.5" y="591.1992">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="104" x="667.5" y="602.1992">Receive confirm from</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="130" x="654.5" y="613.1992">destination Action:terminus</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="132" x="653.5" y="624.1992">/Circuit good, freshen route</text><!--MD5=[189518bbdf603587fdf1693b8b4b362b]
link seekCall to seek--><path d="M775.31,674.179 C781.42,665.309 787.36,654.839 790.5,644.229 C800.46,610.559 810.18,594.299 790.5,565.229 C783.89,555.469 764.15,545.649 741.73,537.109 " fill="none" id="seekCall-to-seek" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="736.91,535.309,743.9325,542.2144,741.5916,537.0646,746.7415,534.7238,736.91,535.309" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="815.5" y="585.6992">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="51" x="818" y="596.6992">Detect call</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="82" x="802.5" y="607.6992">[Change of mind]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="69" x="809" y="618.6992">/want to abort;</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="80" x="803.5" y="629.6992">will await timeout</text><!--MD5=[d27d9978d30cb01b698ef30a4784069a]
link seekCall to call--><path d="M755.5,724.239 C755.5,756.479 755.5,813.759 755.5,848.639 " fill="none" id="seekCall-to-call" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="755.5,854.039,759.5,845.039,755.5,849.039,751.5,845.039,755.5,854.039" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="771.5" y="765.6992">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="51" x="774" y="776.6992">Detect call</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="86" x="756.5" y="787.6992">[Want to proceed]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="72" x="763.5" y="798.6992">/Query referee</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="82" x="758.5" y="809.6992">Request: commit</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="760" y="820.6992">Agent sets timer</text><!--MD5=[be7e069f2bb5ac95aef9635f5b133abf]
link call to callCall--><path d="M721.1,904.409 C712.02,912.719 703.4,922.829 698.5,934.229 C686.56,961.989 686.56,974.469 698.5,1002.229 C702.71,1012.019 709.67,1020.869 717.3,1028.439 " fill="none" id="call-to-callCall" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="721.1,1032.049,717.3423,1022.9452,717.4797,1028.6004,711.8245,1028.7377,721.1,1032.049" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="31" x="717" y="954.6992">Agent:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="64" x="700.5" y="965.6992">Local timeout</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="58" x="703.5" y="976.6992">[Still in call?]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="66" x="699.5" y="987.6992">/Request: call</text><!--MD5=[8a1feee6c367efefb45ce8b87340a3e1]
link callCall to call--><path d="M763.72,1032.059 C766.45,1022.839 769.15,1012.159 770.5,1002.229 C774.58,972.279 774.58,964.179 770.5,934.229 C769.38,926.009 767.34,917.269 765.12,909.269 " fill="none" id="callCall-to-call" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="763.72,904.399,762.3732,914.1553,765.1068,909.2028,770.0593,911.9364,763.72,904.399" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="786" y="943.6992">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="51" x="788.5" y="954.6992">Detect call</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="55" x="786.5" y="965.6992">[Still calling]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="75" x="776.5" y="976.6992">/Query referee;</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="71" x="778.5" y="987.6992">Action: commit</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="774.5" y="998.6992">Agent sets timer</text><!--MD5=[d926a0890e87a5e32de3cf9d5db86af8]
link seek to seekCheck--><path d="M569.24,518.189 C504.42,525.429 423.37,539.439 402.5,565.229 C380.42,592.529 384.98,613.799 402.5,644.229 C408.83,655.229 418.36,664.189 428.94,671.429 " fill="none" id="seek-to-seekCheck" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="433.2,674.219,427.8646,665.9405,429.0179,671.4785,423.4799,672.6318,433.2,674.219" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="31" x="428" y="591.1992">Agent:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="64" x="411.5" y="602.1992">Local timeout</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="65" x="411" y="613.1992">[Lift expired?]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="80" x="403.5" y="624.1992">/Request: check</text><!--MD5=[2e506280d62b645a29fbaaae9bab07dc]
link seekCheck to seek--><path d="M498.6,674.029 C503.48,644.989 515.47,596.309 543.5,565.229 C553.57,554.069 566.44,544.989 579.86,537.669 " fill="none" id="seekCheck-to-seek" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="584.42,535.259,574.5951,535.9451,580.0035,537.603,578.3455,543.0115,584.42,535.259" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="559.5" y="580.1992">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="65" x="555" y="591.1992">Detect check</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="63" x="556" y="602.1992">[Still seeking]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="75" x="550" y="613.1992">/Query referee;</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="66" x="554.5" y="624.1992">Action: check</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="86" x="544.5" y="635.1992">Agent starts timer</text><!--MD5=[1953f02a86cae1c1ee80a502bf9109fd]
reverse link *end to *start--><path d="M230.84,76.229 C265.26,76.229 347.92,76.229 377.09,76.229 " fill="none" id="*end-backto-*start" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="225.74,76.229,234.74,80.229,230.74,76.229,234.74,72.229,225.74,76.229" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="288.5" y="36.6992">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="115" x="244" y="47.6992">Receive Action:promise</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="108" x="247.5" y="58.6992">[Destination not found]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="68" x="267.5" y="69.6992">/Give no reply</text><!--MD5=[0776b33b061fa3c1ca593c267c4e9909]
link *start to draftRelay--><path d="M377.61,78.759 C340.39,84.669 209.21,106.869 175.5,131.229 C142.95,154.749 120.65,196.429 108.48,224.439 " fill="none" id="*start-to-draftRelay" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="106.47,229.159,113.6742,222.4434,108.4275,224.5581,106.3128,219.3114,106.47,229.159" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="231.5" y="140.6992">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="115" x="187" y="151.6992">Receive Action:promise</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="136" x="176.5" y="162.6992">[Route found for destination]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="116" x="186.5" y="173.6992">/Store lift Request:relay;</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="119" x="185" y="184.6992">Forward Action: promise</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="205" y="195.6992">Agent sets timer</text><!--MD5=[a99dfd0520800cf091fc809bfe5456ce]
link *start to draftFound--><path d="M380.5,83.459 C370.45,92.799 352.1,111.469 342.5,131.229 C328.1,160.869 321.63,198.379 318.75,223.929 " fill="none" id="*start-to-draftFound" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="318.19,229.199,323.1191,220.6723,318.7186,224.227,315.164,219.8265,318.19,229.199" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="397.5" y="146.1992">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="115" x="353" y="157.1992">Receive Action:promise</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="123" x="349" y="168.1992">[Destination found locally]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="134" x="343.5" y="179.1992">/Store lift Request: terminus</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="371" y="190.1992">Agent sets timer</text><!--MD5=[b03d74ce3a0bbb16ba9cbc404769b27f]
link draftRelay to pend--><path d="M106.51,279.579 C123.92,326.619 162.09,429.749 180.77,480.229 " fill="none" id="draftRelay-to-pend" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="182.51,484.949,183.1215,475.1191,180.7669,480.2627,175.6234,477.9081,182.51,484.949" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="147" y="324.1992">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="59" x="145.5" y="335.1992">Detect relay</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="57" x="146.5" y="346.1992">/Forward lift</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="75" x="137.5" y="357.1992">Action: promise</text><!--MD5=[598ad41a811de8f93445f66572e6f5a6]
link draftFound to pend--><path d="M304.51,279.579 C281.37,326.619 230.62,429.749 205.77,480.229 " fill="none" id="draftFound-to-pend" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="203.45,484.949,211.0205,478.6493,205.6632,480.4655,203.8469,475.1081,203.45,484.949" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="308" y="324.1992">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="62" x="305" y="335.1992">Detect found</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="91" x="290.5" y="346.1992">/Reply to originator</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="78" x="297" y="357.1992">Action: terminus</text><!--MD5=[9b0a0245deffef3540f070ad5e624804]
link pend to pendCheck--><path d="M131.63,535.309 C119.59,543.019 108.5,552.859 101.5,565.229 C84.2,595.779 84.2,613.679 101.5,644.229 C107.68,655.149 117.05,664.099 127.44,671.349 " fill="none" id="pend-to-pendCheck" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="131.63,674.149,126.3801,665.816,127.4763,671.3656,121.9267,672.4619,131.63,674.149" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="31" x="127" y="591.1992">Agent:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="64" x="110.5" y="602.1992">Local timeout</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="63" x="111" y="613.1992">[Still pending]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="80" x="102.5" y="624.1992">/Request: check</text><!--MD5=[4fce0619015f2e8f833d4365386cd6ba]
link pendCheck to pend--><path d="M191.5,673.959 C191.5,639.719 191.5,577.309 191.5,540.529 " fill="none" id="pendCheck-to-pend" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="191.5,535.289,187.5,544.289,191.5,540.289,195.5,544.289,191.5,535.289" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="207.5" y="574.6992">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="65" x="203" y="585.6992">Detect check</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="63" x="204" y="596.6992">[Still pending]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="75" x="198" y="607.6992">/Query partner,</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="86" x="192.5" y="618.6992">originator, referee</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="59" x="206" y="629.6992">in sequence</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="66" x="202.5" y="640.6992">Action: check</text><!--MD5=[eac544136ba7e66a0445303d1eb1ff29]
link *start to good--><path d="M396.97,80.219 C415.78,86.619 458.16,103.369 482.5,131.229 C505.87,157.979 518.93,197.299 525.59,224.009 " fill="none" id="*start-to-good" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="526.83,229.179,528.6084,219.492,525.6577,224.3184,520.8314,221.3677,526.83,229.179" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="31" x="569.5" y="151.6992">Agent:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="109" x="530.5" y="162.6992">Call to local lift function</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="73" x="548.5" y="173.6992">[Lift completes]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="135" x="517.5" y="184.6992">/Commit lift chits; Consense</text><!--MD5=[3433976049688620fb9a328169b87d4c]
reverse link good to signable--><path d="M529.6,284.599 C529.71,310.489 534.58,347.009 558.5,366.229 C574.57,379.139 913.47,361.269 929.5,374.229 C932.4506,376.614 935.1593,379.2165 937.6446,382.0008 C938.8873,383.393 940.0741,384.8305 941.2074,386.3091 C941.7741,387.0484 942.3273,387.7979 942.8675,388.5571 C943.1376,388.9366 943.4045,389.3187 943.668,389.703 " fill="none" id="good-backto-signable" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="529.64,279.569,525.563,288.5344,529.5971,284.5688,533.5627,288.603,529.64,279.569" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="614" y="324.1992">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="126" x="564" y="335.1992">Receive referee signature</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="68" x="593" y="346.1992">[Verified Valid]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="135" x="559.5" y="357.1992">/Commit lift chits; Consense</text><!--MD5=[9abc0c8fb63ef3ddcc818ab4a621ca0a]
link signable to void--><path d="M969.7618,524.4393 C969.8535,524.5858 969.9459,524.7334 970.0389,524.882 C970.411,525.4766 970.7934,526.0877 971.1859,526.7149 C971.9709,527.9692 972.7961,529.2877 973.6584,530.6657 C980.5575,541.6899 989.8413,556.5259 1000.045,572.8328 C1020.4525,605.4465 1044.54,643.944 1060.59,669.599 " fill="none" id="signable-to-void" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="1063.4,674.099,1061.9984,664.3504,1060.7397,669.8655,1055.2247,668.6068,1063.4,674.099" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="1094.5" y="591.1992">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="126" x="1044.5" y="602.1992">Receive referee signature</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="66" x="1074.5" y="613.1992">[Verified Void]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="1068" y="624.1992">/Mark lift as void</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="151" x="507.25" y="1126.897">Sun Mar 27 10:00:58 MDT 2022</text><!--MD5=[097750cfb814801ff6b27243131438db]
@startuml
!include common.puml

$title(Lift States)
state "draft.init" as draftInit
state "init.seek" as initSeek
state "draft.relay" as draftRelay
state "draft.found" as draftFound
state signable {
  state origin {
    state seek
    state "seek.check" as seekCheck
    state "seek.call" as seekCall
  }
  state call
  state "call.call" as callCall
  state relay {
    state pend
    state "pend.check" as pendCheck
  }
}

draftInit: Status: draft, Request: init
initSeek: Status: init, Request: seek
draftFound:  Status: draft, Request: found
draftRelay:  Status: draft, Request: relay
seek:  Status: seek, Request: null
seekCheck:  Status: seek, Request: check
seekCall:  Status: seek, Request: call
call:  Status: call, Request: null
callCall:  Status: call, Request: call
good:  Status: good, Request: null
pend:  Status: pend, Request: null
void:  Status: void, Request: null
pendCheck:  Status: pend, Request: check
origin: Should not get affirmed but might get voided
relay: Any non-originating node

'State transition rules:
[*] -right[$user]-> draftInit: $trans($user,User initiates linear lift\nRequest:init,'')
[*] -right-> draftInit: $trans(Agent,Automaton initiates circular lift\nRequest:init,'')
draftInit -[$db]-> initSeek: $trans($db, init detected, '', Agent prepares Lift Object\nEncodes destination\nRequest:seek)
initSeek -[$db]-> seek: $trans($db, seek detected,'',Send Upstream\nAction:promise\nAgent starts timer)

seek -[$peer]-> seekCall: $trans($peer,'Receive confirm from\ndestination Action:terminus','', 'Circuit good, freshen route')
seekCall -[$db]-> seek: $trans($db,Detect call, Change of mind, want to abort;\nwill await timeout)
seekCall -[$db]-> call: $trans($db,Detect call, Want to proceed, Query referee\nRequest: commit\nAgent sets timer)
call - -> callCall: $trans(Agent, Local timeout, Still in call?, Request: call)
callCall -[$db]-> call: $trans($db,Detect call, Still calling, Query referee;\nAction: commit\nAgent sets timer)

seek - -> seekCheck: $trans(Agent,Local timeout,Lift expired?, Request: check)
seekCheck -[$db]-> seek: $trans($db,Detect check, Still seeking, Query referee;\nAction: check\nAgent starts timer)

[*] -left[$peer]-> [*]: $trans($peer,Receive Action:promise, Destination not found, Give no reply)
[*] -[$peer]-> draftRelay: $trans($peer,Receive Action:promise,Route found for destination, 'Store lift Request:relay;\nForward Action: promise\nAgent sets timer')
[*] -[$peer]-> draftFound: $trans($peer,Receive Action:promise,Destination found locally, 'Store lift Request: terminus\nAgent sets timer')

draftRelay -[$db]-> pend: $trans($db,Detect relay,'', Forward lift\nAction: promise)
draftFound -[$db]-> pend: $trans($db,Detect found,'', Reply to originator\nAction: terminus)

pend - -> pendCheck: $trans(Agent, Local timeout, Still pending, Request: check)
pendCheck -[$db]-> pend: $trans($db, Detect check, Still pending, 'Query partner,\noriginator, referee\nin sequence\nAction: check')

[*] - -> good: $trans(Agent, Call to local lift function, Lift completes, Commit lift chits; Consense)

signable -up[$peer]-> good: $trans($peer,Receive referee signature, Verified Valid, Commit lift chits; Consense)
signable -[$peer]-> void: $trans($peer,Receive referee signature, Verified Void, Mark lift as void)

@enduml

@startuml



skinparam backgroundColor fff
skinparam stereotypeCBackgroundColor 27d






skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Helvetica
}

skinparam class {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}

skinparam actor {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor cccccc
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam interface {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}



skinparam queue {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 4af
  lifeLineBackgroundColor e0e0e0
}




skinparam state {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
  startColor 4af
  endColor 27d
}

skinparam note {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}








  title Lift States
  footer Sun Mar 27 10:00:58 MDT 2022
state "draft.init" as draftInit
state "init.seek" as initSeek
state "draft.relay" as draftRelay
state "draft.found" as draftFound
state signable {
  state origin {
    state seek
    state "seek.check" as seekCheck
    state "seek.call" as seekCall
  }
  state call
  state "call.call" as callCall
  state relay {
    state pend
    state "pend.check" as pendCheck
  }
}

draftInit: Status: draft, Request: init
initSeek: Status: init, Request: seek
draftFound:  Status: draft, Request: found
draftRelay:  Status: draft, Request: relay
seek:  Status: seek, Request: null
seekCheck:  Status: seek, Request: check
seekCall:  Status: seek, Request: call
call:  Status: call, Request: null
callCall:  Status: call, Request: call
good:  Status: good, Request: null
pend:  Status: pend, Request: null
void:  Status: void, Request: null
pendCheck:  Status: pend, Request: check
origin: Should not get affirmed but might get voided
relay: Any non-originating node

[*] -right[#green]-> draftInit: <font color=green>User:\nUser initiates linear lift\nRequest:init
[*] -right-> draftInit: <font color=black>Agent:\nAutomaton initiates circular lift\nRequest:init
draftInit -[#red]-> initSeek: <font color=red>DB Trigger:\ninit detected\n/Agent prepares Lift Object\nEncodes destination\nRequest:seek
initSeek -[#red]-> seek: <font color=red>DB Trigger:\nseek detected\n/Send Upstream\nAction:promise\nAgent starts timer

seek -[#blue]-> seekCall: <font color=blue>Peer:\nReceive confirm from\ndestination Action:terminus\n/Circuit good, freshen route
seekCall -[#red]-> seek: <font color=red>DB Trigger:\nDetect call\n[Change of mind]\n/want to abort;\nwill await timeout
seekCall -[#red]-> call: <font color=red>DB Trigger:\nDetect call\n[Want to proceed]\n/Query referee\nRequest: commit\nAgent sets timer
call - -> callCall: <font color=black>Agent:\nLocal timeout\n[Still in call?]\n/Request: call
callCall -[#red]-> call: <font color=red>DB Trigger:\nDetect call\n[Still calling]\n/Query referee;\nAction: commit\nAgent sets timer

seek - -> seekCheck: <font color=black>Agent:\nLocal timeout\n[Lift expired?]\n/Request: check
seekCheck -[#red]-> seek: <font color=red>DB Trigger:\nDetect check\n[Still seeking]\n/Query referee;\nAction: check\nAgent starts timer

[*] -left[#blue]-> [*]: <font color=blue>Peer:\nReceive Action:promise\n[Destination not found]\n/Give no reply
[*] -[#blue]-> draftRelay: <font color=blue>Peer:\nReceive Action:promise\n[Route found for destination]\n/Store lift Request:relay;\nForward Action: promise\nAgent sets timer
[*] -[#blue]-> draftFound: <font color=blue>Peer:\nReceive Action:promise\n[Destination found locally]\n/Store lift Request: terminus\nAgent sets timer

draftRelay -[#red]-> pend: <font color=red>DB Trigger:\nDetect relay\n/Forward lift\nAction: promise
draftFound -[#red]-> pend: <font color=red>DB Trigger:\nDetect found\n/Reply to originator\nAction: terminus

pend - -> pendCheck: <font color=black>Agent:\nLocal timeout\n[Still pending]\n/Request: check
pendCheck -[#red]-> pend: <font color=red>DB Trigger:\nDetect check\n[Still pending]\n/Query partner,\noriginator, referee\nin sequence\nAction: check

[*] - -> good: <font color=black>Agent:\nCall to local lift function\n[Lift completes]\n/Commit lift chits; Consense

signable -up[#blue]-> good: <font color=blue>Peer:\nReceive referee signature\n[Verified Valid]\n/Commit lift chits; Consense
signable -[#blue]-> void: <font color=blue>Peer:\nReceive referee signature\n[Verified Void]\n/Mark lift as void

@enduml

PlantUML version 1.2022.1(Tue Feb 01 11:19:58 MST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>