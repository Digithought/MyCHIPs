<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1283px" preserveAspectRatio="none" style="width:1751px;height:1283px;" version="1.1" viewBox="0 0 1751 1283" width="1751px" zoomAndPan="magnify"><defs><filter height="300%" id="f1om6unc59enqd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="88" x="825" y="17.4023">Lift States</text><!--MD5=[82de53af987a6fac08be79bae0f56b09]
cluster proposer--><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="553" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="618" x="917" y="234.1992"/><rect fill="#FFFFFF" height="526" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="612" x="920" y="258.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="917" x2="1535" y1="255.1992" y2="255.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="44" x="1204" y="246.6694">proposer</text><!--MD5=[5ff7f8487711d6a819ec9abb599effe9]
cluster trying--><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="530.36" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="394" x="344" y="723.8392"/><rect fill="#FFFFFF" height="503.36" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="388" x="347" y="747.8392"/><line style="stroke:#202024;stroke-width:1.5;" x1="344" x2="738" y1="744.8392" y2="744.8392"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="27" x="527.5" y="736.3094">trying</text><g id="proposer.draft"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="140" x="933" y="264.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="933" x2="1073" y1="285.1992" y2="285.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="22" x="992" y="277.6694">draft</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="938" y="301.8008">Stat: void, Req: draft</text></g><g id="proposer.seek"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="138" x="1073" y="409.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="1073" x2="1211" y1="430.1992" y2="430.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="24" x="1130" y="422.6694">seek</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="1078" y="446.8008">Stat: seek, Req: N/A</text></g><g id="proposer.term"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="138" x="933" y="565.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="933" x2="1071" y1="586.1992" y2="586.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="22" x="991" y="578.6694">term</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="938" y="602.8008">Stat: term, Req: N/A</text></g><g id="proposer.call"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="130" x="1041" y="721.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="1041" x2="1171" y1="742.1992" y2="742.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="16" x="1098" y="734.6694">call</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="110" x="1046" y="758.8008">Stat: call, Req: N/A</text></g><g id="proposer.timeCheck"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="175" x="1301.5" y="565.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="1301.5" x2="1476.5" y1="586.1992" y2="586.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="52" x="1363" y="578.6694">timeCheck</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="155" x="1306.5" y="602.8008">Stat: seek, Req: N/A, Time</text></g><g id="trying.pend"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="141" x="379.5" y="890.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="379.5" x2="520.5" y1="911.1992" y2="911.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="24" x="438" y="903.6694">pend</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="384.5" y="927.8008">Stat: pend, Req: N/A</text></g><g id="trying.checkProp"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="178" x="368" y="1035.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="368" x2="546" y1="1056.1992" y2="1056.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="53" x="430.5" y="1048.6694">checkProp</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="158" x="373" y="1072.8008">Stat: pend, Req: N/A, Time</text></g><g id="trying.checkRef"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="178" x="484" y="1180.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="484" x2="662" y1="1201.1992" y2="1201.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="47" x="549.5" y="1193.6694">checkRef</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="158" x="489" y="1217.8008">Stat: pend, Req: N/A, Time</text></g><ellipse cx="607" cy="37.1992" fill="#44AAFF" filter="url(#f1om6unc59enqd)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><g id="none"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="51" x="581.5" y="111.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="581.5" x2="632.5" y1="132.1992" y2="132.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="31" x="591.5" y="124.6694">No Lift</text></g><g id="good"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="140" x="762" y="890.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="762" x2="902" y1="911.1992" y2="911.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="24" x="820" y="903.6694">good</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="767" y="927.8008">Stat: good, Req: N/A</text></g><g id="void"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="135" x="1242.5" y="890.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="1242.5" x2="1377.5" y1="911.1992" y2="911.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="20" x="1300" y="903.6694">void</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="115" x="1247.5" y="927.8008">Stat: void, Req: N/A</text></g><g id="local"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="138" x="182" y="721.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="182" x2="320" y1="742.1992" y2="742.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="22" x="240" y="734.6694">local</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="187" y="758.8008">Stat: void, Req: local</text></g><g id="relay"><rect fill="#E8E8EA" filter="url(#f1om6unc59enqd)" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:1.5;" width="140" x="7" y="721.1992"/><line style="stroke:#202024;stroke-width:1.5;" x1="7" x2="147" y1="742.1992" y2="742.1992"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="24" x="65" y="734.6694">relay</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="12" y="758.8008">Stat: void, Req: relay</text></g><!--MD5=[0ed2e745026fd0d436b1b77e9cdb1882]
link *start to none--><path d="M607,47.4992 C607,60.8192 607,85.9192 607,105.8692 " fill="none" id="*start-to-none" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="607,111.0792,611,102.0792,607,106.0792,603,102.0792,607,111.0792" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[b8a2bd5f8bd0f500837135ebc7426c67]
link none to draft--><path d="M632.58,149.3892 C667.82,165.9792 733.49,196.1092 791,218.1992 C835.85,235.4292 886.97,252.3892 927.78,265.2992 " fill="none" id="none-to-draft" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="932.7,266.8492,925.3195,260.3279,927.9314,265.3456,922.9137,267.9576,932.7,266.8492" style="stroke:#008000;stroke-width:1.0;"/><text fill="#008000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="27" x="855" y="203.6694">User:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="153" x="792" y="214.6694">User initiates linear lift Req:draft</text><!--MD5=[b8a2bd5f8bd0f500837135ebc7426c67]
link none to draft--><path d="M632.72,138.6292 C703.35,142.9892 898.46,158.0992 950,194.1992 C972.25,209.7892 986.3,237.8792 994.3,259.3092 " fill="none" id="none-to-draft-1" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="996.01,264.0492,996.7103,254.2253,994.3093,259.3473,989.1873,256.9464,996.01,264.0492" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="1040.5" y="203.6694">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="191" x="973" y="214.6694">Automaton initiates circular lift Req:draft</text><!--MD5=[3a463f2653b48a5c7d220ce005e98019]
link draft to seek--><path d="M1026.58,314.4592 C1050.94,339.5192 1088.93,378.5992 1114.61,405.0192 " fill="none" id="draft-to-seek" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="1118.3,408.8192,1114.8948,399.5778,1114.8148,405.234,1109.1585,405.1541,1118.3,408.8192" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="1126.5" y="353.6694">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="67" x="1121" y="364.6694">draft detected</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="129" x="1090" y="375.6694">/Send Upstream Act:query</text><!--MD5=[5e0422283bf9db92b2a93d1b3a79d7ae]
link seek to void--><path d="M1211.19,435.7792 C1307.02,438.0992 1473.13,448.1392 1515,489.1992 C1612.77,585.0892 1623.28,678.8892 1551,795.1992 C1514.48,853.9692 1439.41,884.5792 1382.71,899.9392 " fill="none" id="seek-to-void" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="1377.63,901.2892,1387.3562,902.8388,1382.4616,900.0027,1385.2977,895.1081,1377.63,901.2892" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="1657.5" y="660.1694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="75" x="1633" y="671.1694">Receive Act:fail</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="145" x="1598" y="682.1694">/Lift failed; Notify referee, user</text><!--MD5=[3c336d3e22ec20b52cea399caff4388a]
link seek to timeCheck--><path d="M1133.19,459.3992 C1126.82,481.5892 1121.98,514.1092 1139,535.1992 C1158.8,559.7292 1233.56,573.6692 1296.22,581.2092 " fill="none" id="seek-to-timeCheck" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="1301.47,581.8292,1292.9998,576.8036,1296.5043,581.2442,1292.0638,584.7487,1301.47,581.8292" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="1214.5" y="504.1694">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="64" x="1210.5" y="515.1694">Local timeout</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="205" x="1140" y="526.1694">/Lift expired?; Request status from referee</text><!--MD5=[c01631737c1f0f8b3ba4fe1ccf7e9ef8]
link timeCheck to seek--><path d="M1385.91,565.0492 C1381.71,542.2692 1372.01,508.7592 1350,489.1992 C1313.48,456.7492 1259.89,443.3692 1216.26,438.0392 " fill="none" id="timeCheck-to-seek" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="1211.26,437.4592,1219.7444,442.4608,1216.2273,438.0302,1220.6579,434.5131,1211.26,437.4592" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="1429" y="504.1694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="128" x="1378" y="515.1694">Receive referee Act:intime</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="92" x="1396" y="526.1694">/Lift not yet expired</text><!--MD5=[6b1400eb778514d0b125ba8b112026ab]
link timeCheck to void--><path d="M1394.71,615.5492 C1404.94,664.8892 1421.66,778.8992 1380,860.1992 C1374.83,870.2992 1366.81,879.0592 1358.01,886.4292 " fill="none" id="timeCheck-to-void" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="1353.64,889.9292,1363.1632,887.4177,1357.5402,886.8005,1358.1573,881.1774,1353.64,889.9292" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="1461.5" y="738.1694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="135" x="1407" y="749.1694">Receive referee Act:timeout</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="95" x="1427" y="760.1694">/Mark lift as expired</text><!--MD5=[482d6309deee2766415261c82560d726]
link seek to term--><path d="M1072.75,437.2892 C1034.41,442.4392 989.66,455.8892 965,489.1992 C949.1,510.6792 962.9,539.7392 977.96,560.9892 " fill="none" id="seek-to-term" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="980.98,565.1392,978.9174,555.5088,978.0374,561.0968,972.4494,560.2169,980.98,565.1392" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="1019" y="498.6694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="104" x="980" y="509.6694">Receive confirm from</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="116" x="974" y="520.6694">destination Act:terminus</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="132" x="966" y="531.6694">/Circuit good, freshen route</text><!--MD5=[f762aa6b86640f97b061015827f08e19]
link term to call--><path d="M987.89,615.3092 C977.33,636.8392 967.06,668.3892 982,691.1992 C994.44,710.1892 1015.17,722.5392 1036.16,730.5492 " fill="none" id="term-to-call" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="1040.92,732.2992,1033.8539,725.4385,1036.2273,730.5733,1031.0925,732.9468,1040.92,732.2992" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="1027.5" y="654.6694">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="1016" y="665.6694">Detect loopback</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="85" x="1013" y="676.6694">[Lift still desirable]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="145" x="983" y="687.6694">/Request commit from referee</text><!--MD5=[f762aa6b86640f97b061015827f08e19]
link term to call--><path d="M1071.34,603.4492 C1094.95,611.2892 1118.91,624.1392 1133,645.1992 C1147.38,666.6792 1137.09,695.5792 1125.31,716.7792 " fill="none" id="term-to-call-1" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="1122.78,721.1892,1130.7223,715.3652,1125.2638,716.8498,1123.7792,711.3912,1122.78,721.1892" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="1167.5" y="654.6694">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="1156" y="665.6694">Detect loopback</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="82" x="1154.5" y="676.6694">[Change of mind]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="109" x="1141" y="687.6694">/Notify referee of abort</text><!--MD5=[bd644e95feb6201a00b40e5eebab8e8c]
link call to good--><path d="M1069.14,771.4192 C1057.05,780.4692 1044.12,791.4392 1034,803.1992 C1015.05,825.2192 1024.53,841.8592 1002,860.1992 C975.1,882.0992 939.2,895.1792 907.32,902.9492 " fill="none" id="call-to-good" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="902.24,904.1592,911.9208,905.971,907.1046,903.0037,910.0719,898.1875,902.24,904.1592" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="1089.5" y="818.1694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="78" x="1063.5" y="829.1694">Receive referee</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="99" x="1053" y="840.1694">signature Act:signed</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="135" x="1035" y="851.1694">/Commit lift chits; Consense</text><!--MD5=[a9de27105e89a4d27fda4dc5e45750b6]
link call to void--><path d="M1142.66,771.3692 C1155.01,780.4992 1168.34,791.5192 1179,803.1992 C1199.2,825.3292 1193.33,839.5092 1215,860.1992 C1225.97,870.6692 1239.36,879.8692 1252.58,887.5692 " fill="none" id="call-to-void" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="1257.05,890.1292,1251.226,882.1869,1252.7105,887.6455,1247.252,889.13,1257.05,890.1292" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="1282.5" y="812.6694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="135" x="1228" y="823.6694">Receive referee Act:timeout</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="42" x="1274.5" y="834.6694">/Too late</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="55" x="1268" y="845.6694">abandon lift</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="159" x="1216" y="856.6694">May try again with longer timeout</text><!--MD5=[f0fd2271ca83be14b7113b9e02bdd7cb]
link none to none--><path d="M632.8,126.3292 C650.34,123.4492 667.5,126.7392 667.5,136.1992 C667.5,144.6992 653.65,148.2192 638.12,146.7492 " fill="none" id="none-to-none" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="632.8,146.0692,641.2108,151.1935,637.7585,146.7122,642.2397,143.2599,632.8,146.0692" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="714.5" y="122.6694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="90" x="682.5" y="133.6694">Receive Act:query</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="108" x="673.5" y="144.6694">[Destination not found]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="81" x="687" y="155.6694">/Reply Act: failed</text><!--MD5=[040d5384375abe6efad2c82f9b7cae97]
link none to relay--><path d="M581.43,137.5492 C505.74,140.0792 288,158.6092 288,288.1992 C288,288.1992 288,288.1992 288,591.1992 C288,630.1692 192.89,686.2292 130.38,718.8692 " fill="none" id="none-to-relay" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="125.94,721.1692,135.7707,720.5709,130.3773,718.8647,132.0835,713.4713,125.94,721.1692" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="372" y="420.6694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="90" x="340" y="431.6694">Receive Act:query</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="136" x="317" y="442.6694">[Route found for destination]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="192" x="289" y="453.6694">/Store lift Req:relay; Forward Act: query</text><!--MD5=[932e2266dc25e87ddfbfaeec5d8ff01e]
link relay to pend--><path d="M78.81,771.5592 C82.12,797.6392 91.49,838.2292 118,860.1992 C156.02,891.7092 288.72,905.1492 374.39,910.6492 " fill="none" id="relay-to-pend" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="379.46,910.9692,370.7295,906.4109,374.4699,910.6547,370.2262,914.3951,379.46,910.9692" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="146" y="823.6694">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="59" x="144.5" y="834.6694">Detect relay</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="110" x="119" y="845.6694">/Forward lift Act: query</text><!--MD5=[c53c1e11ec8329e6f374aafba7fffcfc]
link none to local--><path d="M599.46,161.2492 C590.86,190.8192 578,242.6892 578,288.1992 C578,288.1992 578,288.1992 578,591.1992 C578,598.5192 404.26,676.9892 310.07,718.9992 " fill="none" id="none-to-local" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="305.36,721.0892,315.2089,721.0835,309.9279,719.0559,311.9555,713.7749,305.36,721.0892" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="627.5" y="420.6694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="90" x="595.5" y="431.6694">Receive Act:query</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="123" x="579" y="442.6694">[Destination found locally]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="92" x="594.5" y="453.6694">/Store lift Req: dest</text><!--MD5=[d3d9933f31736ef82111a9b8ed0b01e1]
link local to pend--><path d="M243.19,771.5092 C236.82,796.4092 231.69,834.9592 251,860.1992 C266.27,880.1692 324.67,894.4792 374.28,903.3292 " fill="none" id="local-to-pend" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="379.36,904.2192,371.1939,898.7133,374.4364,903.3487,369.801,906.5911,379.36,904.2192" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="302.5" y="823.6694">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="59" x="301" y="834.6694">Detect relay</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="157" x="252" y="845.6694">/Reply to proposer Act: terminus</text><!--MD5=[33ecc3f5d72134943e03405de2d22881]
link trying to good--><path d="M738.0935,813.488 C738.1982,813.641 738.302,813.7937 738.4049,813.9459 C738.6106,814.2504 738.8126,814.5532 739.0109,814.8545 C739.8042,816.0596 740.5396,817.2397 741.2289,818.3998 C743.9859,823.0405 746.0031,827.3617 748.0188,831.6842 C752.05,840.3292 756.075,848.9792 766,860.1992 C774.33,869.6092 784.38,878.7192 794.11,886.6892 " fill="none" id="trying-to-good" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="798.26,890.0292,793.7584,881.2694,794.3655,886.8935,788.7413,887.5006,798.26,890.0292" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="798" y="823.6694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="88" x="767" y="834.6694">Receive signature</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="71" x="775.5" y="845.6694">via consensus</text><!--MD5=[33ecc3f5d72134943e03405de2d22881]
link trying to good--><path d="M738.1164,876.2863 C738.1743,876.3022 738.2322,876.3181 738.2902,876.334 C739.2167,876.5887 740.1446,876.8488 741.0734,877.1141 C744.7887,878.1752 748.5188,879.3186 752.235,880.523 C759.6675,882.9317 767.045,885.5842 774.14,888.3092 " fill="none" id="trying-to-good-1" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="778.9,890.1692,771.9659,883.1751,774.2411,888.3542,769.0619,890.6294,778.9,890.1692" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="640.5" y="818.1694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="113" x="597" y="829.1694">Receive signature from</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="100" x="603.5" y="840.1694">Proposer or Referee</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="135" x="586" y="851.1694">/Commit lift chits; Consense</text><!--MD5=[2d47bfcdfc5379471d9a4c3db6a2769d]
link pend to checkProp--><path d="M451.19,940.4592 C452.39,965.1092 454.26,1003.3292 455.56,1029.7092 " fill="none" id="pend-to-checkProp" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="455.81,1034.8192,459.3687,1025.6358,455.5674,1029.8251,451.3781,1026.0239,455.81,1034.8192" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="469" y="979.6694">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="64" x="465" y="990.6694">Local timeout</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="82" x="456" y="1001.6694">/Query Proposer</text><!--MD5=[9e9a88dde37fddb77f65c0f1f0bc7abb]
link checkProp to checkRef--><path d="M476.53,1085.3892 C491,1103.2992 511.21,1128.2892 529,1150.1992 C535.81,1158.5892 543.23,1167.6992 550,1176.0092 " fill="none" id="checkProp-to-checkRef" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="553.27,1180.0192,550.6991,1170.5118,550.117,1176.1386,544.4902,1175.5566,553.27,1180.0192" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="540" y="1124.6694">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="64" x="536" y="1135.6694">Local timeout</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="76" x="530" y="1146.6694">/Query Referee</text><!--MD5=[eec98612677d31e77a97100daee276a6]
link checkRef to pend--><path d="M594.68,1180.1192 C601.25,1171.3292 607.61,1160.9092 611,1150.1992 C615.7,1135.3692 614.21,1130.4192 611,1115.1992 C596.46,1046.2692 594.46,1022.2592 547,970.1992 C537.23,959.4792 524.82,950.3992 512.17,942.9092 " fill="none" id="checkRef-to-pend" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="507.5,940.2292,513.293,948.1942,511.8297,942.7299,517.2941,941.2666,507.5,940.2292" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="625" y="1052.1694">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="64" x="621" y="1063.1694">Local timeout</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="96" x="605" y="1074.1694">/Keep trying forever</text><!--MD5=[3fafb5553a6c84c5124198d1950df6db]
link trying to void--><path d="M738.1927,754.7224 C738.511,754.7797 738.8298,754.8375 739.1491,754.8957 C740.4261,755.1286 741.7107,755.3686 743.0022,755.6158 C745.5851,756.1102 748.1956,756.6336 750.8283,757.1877 C756.0937,758.296 761.4482,759.5271 766.8495,760.8948 C777.652,763.6302 788.6416,766.9116 799.4805,770.8481 C821.1581,778.7211 842.2325,789.2142 860,803.1992 C882.83,821.1692 867.92,843.9392 892,860.1992 C946.79,897.1892 1132.5,908.8692 1237,912.5292 " fill="none" id="trying-to-void" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="1242.22,912.7092,1233.3623,908.4032,1237.2229,912.5379,1233.0882,916.3985,1242.22,912.7092" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="930" y="818.1694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="100" x="893" y="829.1694">Receive cancel from</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="100" x="893" y="840.1694">Proposer or Referee</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="98" x="894" y="851.1694">/Void lift record/chits</text><!--MD5=[cbe32db24763ee5420da71c0c8a96298]
link trying to pend--><path d="M660.9,747.1892 C656.72,746.8092 522.38,735.2292 464,803.1992 C444.86,825.4792 443.45,860.1792 445.5,884.8492 " fill="none" id="trying-to-pend" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="445.98,889.9492,449.0859,880.6029,445.4938,884.9729,441.1238,881.3808,445.98,889.9492" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="502" y="818.1694">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="96" x="467" y="829.1694">Receive intime from</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="100" x="465" y="840.1694">Proposer or Referee</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="98" x="466" y="851.1694">/Void lift record/chits</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="145" x="796.5" y="1274.8672">Thu Jul 01 13:58:56 MDT 2021</text><!--MD5=[febeb8b10294a9139644139e703e6c98]
@startuml
!include common.puml

$title(Lift States)
[*] - -> none
state "No Lift" as none

'States are determined by a combination of values, as defined here:
'init:  Stat: void, Req: init		'First implementation uses this.  Will try to avoid extra state in next version
state proposer {
draft: Stat: void, Req: draft
seek:  Stat: seek, Req: N/A
term:  Stat: term, Req: N/A
call:  Stat: call, Req: N/A
timeCheck:  Stat: seek, Req: N/A, Time
}

good:  Stat: good, Req: N/A

state trying {
  pend:  Stat: pend, Req: N/A
  checkProp:  Stat: pend, Req: N/A, Time
  checkRef:  Stat: pend, Req: N/A, Time
}
void:  Stat: void, Req: N/A
local:  Stat: void, Req: local
relay:  Stat: void, Req: relay

'State transition rules:
none -[$user]-> draft: $trans($user,User initiates linear lift Req:draft,'')
none -[$db]-> draft: $trans($db,Automaton initiates circular lift Req:draft,'')
'draft -[$db]-> init: $trans($db,draft detected,'',Forward Upstream Act:query)
draft -[$db]-> seek: $trans($db,draft detected,'',Send Upstream Act:query)

seek -[$peer]-> void: $trans($peer,Receive Act:fail,'','Lift failed; Notify referee, user')
seek -[$db]-> timeCheck: $trans($db,Local timeout,'', Lift expired?; Request status from referee)
timeCheck -[$peer]-> void: $trans($peer,Receive referee Act:timeout,'', 'Mark lift as expired')
timeCheck -[$peer]-> seek: $trans($peer,Receive referee Act:intime,'', 'Lift not yet expired')
seek -[$peer]-> term: $trans($peer,'Receive confirm from\ndestination Act:terminus','', 'Circuit good, freshen route')
term -[$db]-> call: $trans($db,Detect loopback,Lift still desirable, Request commit from referee)
term -[$db]-> call: $trans($db,Detect loopback,Change of mind, Notify referee of abort)
call -[$peer]-> good: $trans($peer,'Receive referee\nsignature Act:signed','', Commit lift chits; Consense)
call -[$peer]-> void: $trans($peer,Receive referee Act:timeout,'', 'Too late\nabandon lift\nMay try again with longer timeout')

none -[$peer]-> none: $trans($peer,Receive Act:query,Destination not found, Reply Act: failed)
none -[$peer]-> relay: $trans($peer,Receive Act:query,Route found for destination, 'Store lift Req:relay; Forward Act: query')
relay -[$db]-> pend: $trans($db,Detect relay,'', Forward lift Act: query)

none -[$peer]-> local: $trans($peer,Receive Act:query,Destination found locally, 'Store lift Req: dest')
local -[$db]-> pend: $trans($db,Detect relay,'', Reply to proposer Act: terminus)

trying -[$peer]-> good: $trans($peer,'Receive signature\nvia consensus')
pend -[$db]-> checkProp: $trans($db,Local timeout,'', Query Proposer)
checkProp -[$db]-> checkRef: $trans($db,Local timeout,'', Query Referee)
checkRef -[$db]-> pend: $trans($db,Local timeout,'', Keep trying forever)

trying -[$peer]-> good: $trans($peer,'Receive signature from\nProposer or Referee','', 'Commit lift chits; Consense')
trying -[$peer]-> void: $trans($peer,'Receive cancel from\nProposer or Referee','', 'Void lift record/chits')
trying -[$peer]-> pend: $trans($peer,'Receive intime from\nProposer or Referee','', 'Void lift record/chits')

@enduml

@startuml



skinparam backgroundColor fff
skinparam stereotypeCBackgroundColor 27d






skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Helvetica
}

skinparam class {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}

skinparam actor {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor cccccc
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam interface {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}



skinparam queue {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 4af
  lifeLineBackgroundColor e0e0e0
}




skinparam state {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
  startColor 4af
  endColor 27d
}

skinparam note {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}








  title Lift States
  footer Thu Jul 01 13:58:56 MDT 2021
[*] - -> none
state "No Lift" as none

state proposer {
draft: Stat: void, Req: draft
seek:  Stat: seek, Req: N/A
term:  Stat: term, Req: N/A
call:  Stat: call, Req: N/A
timeCheck:  Stat: seek, Req: N/A, Time
}

good:  Stat: good, Req: N/A

state trying {
  pend:  Stat: pend, Req: N/A
  checkProp:  Stat: pend, Req: N/A, Time
  checkRef:  Stat: pend, Req: N/A, Time
}
void:  Stat: void, Req: N/A
local:  Stat: void, Req: local
relay:  Stat: void, Req: relay

none -[#green]-> draft: <font color=green>User:\nUser initiates linear lift Req:draft
none -[#red]-> draft: <font color=red>DB Trigger:\nAutomaton initiates circular lift Req:draft
draft -[#red]-> seek: <font color=red>DB Trigger:\ndraft detected\n/Send Upstream Act:query

seek -[#blue]-> void: <font color=blue>Peer:\nReceive Act:fail\n/Lift failed; Notify referee, user
seek -[#red]-> timeCheck: <font color=red>DB Trigger:\nLocal timeout\n/Lift expired?; Request status from referee
timeCheck -[#blue]-> void: <font color=blue>Peer:\nReceive referee Act:timeout\n/Mark lift as expired
timeCheck -[#blue]-> seek: <font color=blue>Peer:\nReceive referee Act:intime\n/Lift not yet expired
seek -[#blue]-> term: <font color=blue>Peer:\nReceive confirm from\ndestination Act:terminus\n/Circuit good, freshen route
term -[#red]-> call: <font color=red>DB Trigger:\nDetect loopback\n[Lift still desirable]\n/Request commit from referee
term -[#red]-> call: <font color=red>DB Trigger:\nDetect loopback\n[Change of mind]\n/Notify referee of abort
call -[#blue]-> good: <font color=blue>Peer:\nReceive referee\nsignature Act:signed\n/Commit lift chits; Consense
call -[#blue]-> void: <font color=blue>Peer:\nReceive referee Act:timeout\n/Too late\nabandon lift\nMay try again with longer timeout

none -[#blue]-> none: <font color=blue>Peer:\nReceive Act:query\n[Destination not found]\n/Reply Act: failed
none -[#blue]-> relay: <font color=blue>Peer:\nReceive Act:query\n[Route found for destination]\n/Store lift Req:relay; Forward Act: query
relay -[#red]-> pend: <font color=red>DB Trigger:\nDetect relay\n/Forward lift Act: query

none -[#blue]-> local: <font color=blue>Peer:\nReceive Act:query\n[Destination found locally]\n/Store lift Req: dest
local -[#red]-> pend: <font color=red>DB Trigger:\nDetect relay\n/Reply to proposer Act: terminus

trying -[#blue]-> good: <font color=blue>Peer:\nReceive signature\nvia consensus
pend -[#red]-> checkProp: <font color=red>DB Trigger:\nLocal timeout\n/Query Proposer
checkProp -[#red]-> checkRef: <font color=red>DB Trigger:\nLocal timeout\n/Query Referee
checkRef -[#red]-> pend: <font color=red>DB Trigger:\nLocal timeout\n/Keep trying forever

trying -[#blue]-> good: <font color=blue>Peer:\nReceive signature from\nProposer or Referee\n/Commit lift chits; Consense
trying -[#blue]-> void: <font color=blue>Peer:\nReceive cancel from\nProposer or Referee\n/Void lift record/chits
trying -[#blue]-> pend: <font color=blue>Peer:\nReceive intime from\nProposer or Referee\n/Void lift record/chits

@enduml

PlantUML version 1.2021.00(Sun Jan 10 03:25:05 MST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>