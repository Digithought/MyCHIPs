<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="677px" preserveAspectRatio="none" style="width:469px;height:677px;" version="1.1" viewBox="0 0 469 677" width="469px" zoomAndPan="magnify"><defs><filter height="300%" id="fy22xqpeijw85" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="269" x="98" y="29.4023">Automatic Route Discovery WIP</text><rect fill="#FFFFFF" filter="url(#fy22xqpeijw85)" height="178.5313" style="stroke:#000000;stroke-width:2.0;" width="366" x="89" y="119.6875"/><rect fill="#FFFFFF" filter="url(#fy22xqpeijw85)" height="122.2207" style="stroke:#000000;stroke-width:2.0;" width="319" x="99" y="168.998"/><rect fill="#FFFFFF" height="39.9551" style="stroke:none;stroke-width:1.0;" width="319" x="99" y="211.3086"/><rect fill="#FFFFFF" height="39.9551" style="stroke:none;stroke-width:1.0;" width="319" x="99" y="251.2637"/><rect fill="#FFFFFF" filter="url(#fy22xqpeijw85)" height="264.752" style="stroke:#000000;stroke-width:2.0;" width="359" x="79" y="312.2188"/><rect fill="#FFFFFF" filter="url(#fy22xqpeijw85)" height="233.4414" style="stroke:#000000;stroke-width:2.0;" width="339" x="89" y="336.5293"/><rect fill="#FFFFFF" filter="url(#fy22xqpeijw85)" height="202.1309" style="stroke:#000000;stroke-width:2.0;" width="319" x="99" y="360.8398"/><rect fill="#FFFFFF" height="39.9551" style="stroke:none;stroke-width:1.0;" width="319" x="99" y="403.1504"/><rect fill="#FFFFFF" height="39.9551" style="stroke:none;stroke-width:1.0;" width="319" x="99" y="443.1055"/><rect fill="#FFFFFF" height="39.9551" style="stroke:none;stroke-width:1.0;" width="319" x="99" y="483.0605"/><rect fill="#FFFFFF" height="39.9551" style="stroke:none;stroke-width:1.0;" width="319" x="99" y="523.0156"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="52" x2="52" y1="102.6875" y2="593.9707"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="140" x2="140" y1="102.6875" y2="593.9707"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="239" x2="239" y1="102.6875" y2="593.9707"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="326" x2="326" y1="102.6875" y2="593.9707"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="382" x2="382" y1="102.6875" y2="593.9707"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="5" y="99.7344">Upstream DB</text><path d="M34,50.1992 C34,40.1992 52,40.1992 52,40.1992 C52,40.1992 70,40.1992 70,50.1992 L70,76.1992 C70,86.1992 52,86.1992 52,86.1992 C52,86.1992 34,86.1992 34,76.1992 L34,50.1992 " fill="#FEFECE" filter="url(#fy22xqpeijw85)" style="stroke:#000000;stroke-width:1.5;"/><path d="M34,50.1992 C34,60.1992 52,60.1992 52,60.1992 C52,60.1992 70,60.1992 70,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="5" y="606.5059">Upstream DB</text><path d="M34,619.459 C34,609.459 52,609.459 52,609.459 C52,609.459 70,609.459 70,619.459 L70,645.459 C70,655.459 52,655.459 52,655.459 C52,655.459 34,655.459 34,645.459 L34,619.459 " fill="#FEFECE" filter="url(#fy22xqpeijw85)" style="stroke:#000000;stroke-width:1.5;"/><path d="M34,619.459 C34,629.459 52,629.459 52,629.459 C52,629.459 70,629.459 70,619.459 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="109" y="99.7344">Local DB</text><path d="M122.5,50.1992 C122.5,40.1992 140.5,40.1992 140.5,40.1992 C140.5,40.1992 158.5,40.1992 158.5,50.1992 L158.5,76.1992 C158.5,86.1992 140.5,86.1992 140.5,86.1992 C140.5,86.1992 122.5,86.1992 122.5,76.1992 L122.5,50.1992 " fill="#FEFECE" filter="url(#fy22xqpeijw85)" style="stroke:#000000;stroke-width:1.5;"/><path d="M122.5,50.1992 C122.5,60.1992 140.5,60.1992 140.5,60.1992 C140.5,60.1992 158.5,60.1992 158.5,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="109" y="606.5059">Local DB</text><path d="M122.5,619.459 C122.5,609.459 140.5,609.459 140.5,609.459 C140.5,609.459 158.5,609.459 158.5,619.459 L158.5,645.459 C158.5,655.459 140.5,655.459 140.5,655.459 C140.5,655.459 122.5,655.459 122.5,645.459 L122.5,619.459 " fill="#FEFECE" filter="url(#fy22xqpeijw85)" style="stroke:#000000;stroke-width:1.5;"/><path d="M122.5,619.459 C122.5,629.459 140.5,629.459 140.5,629.459 C140.5,629.459 158.5,629.459 158.5,619.459 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="182" y="99.7344">Downstream DB</text><path d="M221,50.1992 C221,40.1992 239,40.1992 239,40.1992 C239,40.1992 257,40.1992 257,50.1992 L257,76.1992 C257,86.1992 239,86.1992 239,86.1992 C239,86.1992 221,86.1992 221,76.1992 L221,50.1992 " fill="#FEFECE" filter="url(#fy22xqpeijw85)" style="stroke:#000000;stroke-width:1.5;"/><path d="M221,50.1992 C221,60.1992 239,60.1992 239,60.1992 C239,60.1992 257,60.1992 257,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="182" y="606.5059">Downstream DB</text><path d="M221,619.459 C221,609.459 239,609.459 239,609.459 C239,609.459 257,609.459 257,619.459 L257,645.459 C257,655.459 239,655.459 239,655.459 C239,655.459 221,655.459 221,645.459 L221,619.459 " fill="#FEFECE" filter="url(#fy22xqpeijw85)" style="stroke:#000000;stroke-width:1.5;"/><path d="M221,619.459 C221,629.459 239,629.459 239,629.459 C239,629.459 257,629.459 257,619.459 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#E8E8EA" filter="url(#fy22xqpeijw85)" height="25" style="stroke:#202024;stroke-width:1.5;" width="36" x="306" y="72.6875"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="22" x="313" y="88.1577">user</text><rect fill="#E8E8EA" filter="url(#fy22xqpeijw85)" height="25" style="stroke:#202024;stroke-width:1.5;" width="36" x="306" y="592.9707"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="22" x="313" y="608.4409">user</text><rect fill="#E8E8EA" filter="url(#fy22xqpeijw85)" height="25" style="stroke:#202024;stroke-width:1.5;" width="48" x="356" y="72.6875"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="34" x="363" y="88.1577">partDB</text><rect fill="#E8E8EA" filter="url(#fy22xqpeijw85)" height="25" style="stroke:#202024;stroke-width:1.5;" width="48" x="356" y="592.9707"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="34" x="363" y="608.4409">partDB</text><path d="M89,119.6875 L450,119.6875 L450,126.6875 L440,136.6875 L89,136.6875 L89,119.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="178.5313" style="stroke:#000000;stroke-width:2.0;" width="366" x="89" y="119.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="316" x="104" y="133.2559">User requests route via a specific tally/partner</text><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="150.5" y1="153.998" y2="149.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="150.5" y1="153.998" y2="157.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="325" y1="153.998" y2="153.998"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="152" x="157.5" y="149.4683">Request route to specified peer</text><path d="M99,168.998 L161,168.998 L161,175.998 L151,185.998 L99,185.998 L99,168.998 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="122.2207" style="stroke:#000000;stroke-width:2.0;" width="319" x="99" y="168.998"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="114" y="182.5664">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="131" x="176" y="181.6328">[Pathway found locally]</text><line style="stroke:#000000;stroke-width:1.0;" x1="324" x2="314" y1="203.3086" y2="199.3086"/><line style="stroke:#000000;stroke-width:1.0;" x1="324" x2="314" y1="203.3086" y2="207.3086"/><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="325" y1="203.3086" y2="203.3086"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="83" x="147.5" y="198.7788">Notify user: good</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99" x2="418" y1="212.3086" y2="212.3086"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="235" x="104" y="222.9434">[Existing route found (good, failed, stale)]</text><line style="stroke:#000000;stroke-width:1.0;" x1="380" x2="370" y1="243.2637" y2="239.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="380" x2="370" y1="243.2637" y2="247.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="381" y1="243.2637" y2="243.2637"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="147.5" y="238.7339">Request refresh</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99" x2="418" y1="252.2637" y2="252.2637"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93" x="104" y="262.8984">[No route found]</text><line style="stroke:#000000;stroke-width:1.0;" x1="380" x2="370" y1="283.2188" y2="279.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="380" x2="370" y1="283.2188" y2="287.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="381" y1="283.2188" y2="283.2188"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="69" x="147.5" y="278.689">Request route</text><path d="M79,312.2188 L317,312.2188 L317,319.2188 L307,329.2188 L79,329.2188 L79,312.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="264.752" style="stroke:#000000;stroke-width:2.0;" width="359" x="79" y="312.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="193" x="94" y="325.7871">User requests any/all routes</text><path d="M89,336.5293 L163,336.5293 L163,343.5293 L153,353.5293 L89,353.5293 L89,336.5293 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="233.4414" style="stroke:#000000;stroke-width:2.0;" width="339" x="89" y="336.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="104" y="350.0977">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="189" x="178" y="349.1641">[Over all tallies with lift capacity]</text><path d="M99,360.8398 L161,360.8398 L161,367.8398 L151,377.8398 L99,377.8398 L99,360.8398 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="202.1309" style="stroke:#000000;stroke-width:2.0;" width="319" x="99" y="360.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="114" y="374.4082">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="150" x="176" y="373.4746">[Destination found locally]</text><line style="stroke:#000000;stroke-width:1.0;" x1="324" x2="314" y1="395.1504" y2="391.1504"/><line style="stroke:#000000;stroke-width:1.0;" x1="324" x2="314" y1="395.1504" y2="399.1504"/><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="325" y1="395.1504" y2="395.1504"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="90" x="147.5" y="390.6206">Update user: good</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99" x2="418" y1="404.1504" y2="404.1504"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="152" x="104" y="414.7852">[Current good route found]</text><line style="stroke:#000000;stroke-width:1.0;" x1="324" x2="314" y1="435.1055" y2="431.1055"/><line style="stroke:#000000;stroke-width:1.0;" x1="324" x2="314" y1="435.1055" y2="439.1055"/><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="325" y1="435.1055" y2="435.1055"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="90" x="147.5" y="430.5757">Update user: good</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99" x2="418" y1="444.1055" y2="444.1055"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="156" x="104" y="454.7402">[Current failed route found]</text><line style="stroke:#000000;stroke-width:1.0;" x1="324" x2="314" y1="475.0605" y2="471.0605"/><line style="stroke:#000000;stroke-width:1.0;" x1="324" x2="314" y1="475.0605" y2="479.0605"/><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="325" y1="475.0605" y2="475.0605"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="91" x="147.5" y="470.5308">Update user: failed</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99" x2="418" y1="484.0605" y2="484.0605"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="196" x="104" y="494.6953">[Stale route found (good or failed)]</text><line style="stroke:#000000;stroke-width:1.0;" x1="380" x2="370" y1="515.0156" y2="511.0156"/><line style="stroke:#000000;stroke-width:1.0;" x1="380" x2="370" y1="515.0156" y2="519.0156"/><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="381" y1="515.0156" y2="515.0156"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="128" x="147.5" y="510.4858">Request upstream refresh</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99" x2="418" y1="524.0156" y2="524.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="141" x="104" y="534.6504">[No existing route found]</text><line style="stroke:#000000;stroke-width:1.0;" x1="380" x2="370" y1="554.9707" y2="550.9707"/><line style="stroke:#000000;stroke-width:1.0;" x1="380" x2="370" y1="554.9707" y2="558.9707"/><line style="stroke:#000000;stroke-width:1.0;" x1="140.5" x2="381" y1="554.9707" y2="554.9707"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="118" x="147.5" y="550.4409">Request upstream route</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="150" x="157.5" y="669.127">Thu Mar 11 08:29:44 MST 2021</text><!--MD5=[8f53b35872bfc3e55d3360fcb0afe552]
@startuml
!include common.puml
$title(Automatic Route Discovery WIP)
database "Upstream DB" as upDB
database "Local DB" as userDB
database "Downstream DB" as downDB

group User requests route via a specific tally/partner
  user		->>	userDB:		Request route to specified peer

  alt Pathway found locally
    userDB	->>	user:		Notify user: good
  else Existing route found (good, failed, stale)
    userDB	->>	partDB:		Request refresh
  else No route found
    userDB	->>	partDB:		Request route
  end
end

group User requests any/all routes
  loop Over all tallies with lift capacity
    alt Destination found locally
      userDB ->>	user:		Update user: good
  
    else Current good route found
      userDB ->>	user:		Update user: good
    
    else Current failed route found
      userDB ->>	user:		Update user: failed
    
    else Stale route found (good or failed)
      userDB ->>	partDB:		Request upstream refresh

    else No existing route found
      userDB ->>	partDB:		Request upstream route
    end
  end
end
  
@enduml

@startuml



skinparam backgroundColor fff
skinparam stereotypeCBackgroundColor 27d






skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Helvetica
}

skinparam class {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}

skinparam actor {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor cccccc
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam interface {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}



skinparam queue {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 4af
  lifeLineBackgroundColor e0e0e0
}




skinparam state {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
  startColor 4af
  endColor 27d
}

skinparam note {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}







  title Automatic Route Discovery WIP
  footer Thu Mar 11 08:29:44 MST 2021
database "Upstream DB" as upDB
database "Local DB" as userDB
database "Downstream DB" as downDB

group User requests route via a specific tally/partner
  user		->>	userDB:		Request route to specified peer

  alt Pathway found locally
    userDB	->>	user:		Notify user: good
  else Existing route found (good, failed, stale)
    userDB	->>	partDB:		Request refresh
  else No route found
    userDB	->>	partDB:		Request route
  end
end

group User requests any/all routes
  loop Over all tallies with lift capacity
    alt Destination found locally
      userDB ->>	user:		Update user: good
  
    else Current good route found
      userDB ->>	user:		Update user: good
    
    else Current failed route found
      userDB ->>	user:		Update user: failed
    
    else Stale route found (good or failed)
      userDB ->>	partDB:		Request upstream refresh

    else No existing route found
      userDB ->>	partDB:		Request upstream route
    end
  end
end
  
@enduml

PlantUML version 1.2021.00(Sun Jan 10 03:25:05 MST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>