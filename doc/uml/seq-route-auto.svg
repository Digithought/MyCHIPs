<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="722px" preserveAspectRatio="none" style="width:485px;height:722px;" version="1.1" viewBox="0 0 485 722" width="485px" zoomAndPan="magnify"><defs><filter height="300%" id="f19152e2cvicbv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="233" x="124.25" y="29.4023">Automatic Route Discovery</text><rect fill="#FFFFFF" filter="url(#f19152e2cvicbv)" height="166.5313" style="stroke:#000000;stroke-width:2.0;" width="302" x="169.5" y="201.6875"/><rect fill="#FFFFFF" filter="url(#f19152e2cvicbv)" height="135.2207" style="stroke:#000000;stroke-width:2.0;" width="256.5" x="179.5" y="225.998"/><rect fill="#FFFFFF" height="39.9551" style="stroke:none;stroke-width:1.0;" width="256.5" x="179.5" y="281.3086"/><rect fill="#FFFFFF" height="39.9551" style="stroke:none;stroke-width:1.0;" width="256.5" x="179.5" y="321.2637"/><rect fill="#FFFFFF" filter="url(#f19152e2cvicbv)" height="158.2656" style="stroke:#000000;stroke-width:2.0;" width="256.5" x="179.5" y="417.2188"/><rect fill="#FFFFFF" height="77.9551" style="stroke:none;stroke-width:1.0;" width="256.5" x="179.5" y="497.5293"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="41" x2="41" y1="102.6875" y2="638.4844"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="220.5" x2="220.5" y1="102.6875" y2="638.4844"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="379" x2="379" y1="102.6875" y2="638.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="5" y="99.7344">Lift Agent</text><ellipse cx="41" cy="70.1992" fill="#FEFECE" filter="url(#f19152e2cvicbv)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="37,58.1992,43,53.1992,41,58.1992,43,63.1992,37,58.1992" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="5" y="651.0195">Lift Agent</text><ellipse cx="41" cy="669.9727" fill="#FEFECE" filter="url(#f19152e2cvicbv)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="37,657.9727,43,652.9727,41,657.9727,43,662.9727,37,657.9727" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="189.5" y="99.7344">Local DB</text><path d="M203,50.1992 C203,40.1992 221,40.1992 221,40.1992 C221,40.1992 239,40.1992 239,50.1992 L239,76.1992 C239,86.1992 221,86.1992 221,86.1992 C221,86.1992 203,86.1992 203,76.1992 L203,50.1992 " fill="#FEFECE" filter="url(#f19152e2cvicbv)" style="stroke:#000000;stroke-width:1.5;"/><path d="M203,50.1992 C203,60.1992 221,60.1992 221,60.1992 C221,60.1992 239,60.1992 239,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="189.5" y="651.0195">Local DB</text><path d="M203,663.9727 C203,653.9727 221,653.9727 221,653.9727 C221,653.9727 239,653.9727 239,663.9727 L239,689.9727 C239,699.9727 221,699.9727 221,699.9727 C221,699.9727 203,699.9727 203,689.9727 L203,663.9727 " fill="#FEFECE" filter="url(#f19152e2cvicbv)" style="stroke:#000000;stroke-width:1.5;"/><path d="M203,663.9727 C203,673.9727 221,673.9727 221,673.9727 C221,673.9727 239,673.9727 239,663.9727 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="332" y="99.7344">Upstream DB</text><path d="M361,50.1992 C361,40.1992 379,40.1992 379,40.1992 C379,40.1992 397,40.1992 397,50.1992 L397,76.1992 C397,86.1992 379,86.1992 379,86.1992 C379,86.1992 361,86.1992 361,76.1992 L361,50.1992 " fill="#FEFECE" filter="url(#f19152e2cvicbv)" style="stroke:#000000;stroke-width:1.5;"/><path d="M361,50.1992 C361,60.1992 379,60.1992 379,60.1992 C379,60.1992 397,60.1992 397,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="332" y="651.0195">Upstream DB</text><path d="M361,663.9727 C361,653.9727 379,653.9727 379,653.9727 C379,653.9727 397,653.9727 397,663.9727 L397,689.9727 C397,699.9727 379,699.9727 379,699.9727 C379,699.9727 361,699.9727 361,689.9727 L361,663.9727 " fill="#FEFECE" filter="url(#f19152e2cvicbv)" style="stroke:#000000;stroke-width:1.5;"/><path d="M361,663.9727 C361,673.9727 379,673.9727 379,673.9727 C379,673.9727 397,673.9727 397,663.9727 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><polygon fill="#000000" points="209,125.6875,219,129.6875,209,133.6875,213,129.6875" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="41" x2="215" y1="129.6875" y2="129.6875"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="156" x="48" y="125.1577">Request scan of local segments</text><path d="M136,142.6875 L136,185.6875 L301,185.6875 L301,152.6875 L291,142.6875 L136,142.6875 " fill="#E8E8EA" filter="url(#f19152e2cvicbv)" style="stroke:#202024;stroke-width:1.0;"/><path d="M291,142.6875 L291,152.6875 L301,152.6875 L291,142.6875 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="144" x="142" y="156.1577">Query for local segments that</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="112" x="142" y="167.1577">- have lift capacity; and</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="103" x="142" y="178.1577">- need route attention</text><path d="M169.5,201.6875 L243.5,201.6875 L243.5,208.6875 L233.5,218.6875 L169.5,218.6875 L169.5,201.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="166.5313" style="stroke:#000000;stroke-width:2.0;" width="302" x="169.5" y="201.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="184.5" y="215.2559">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="208" x="258.5" y="214.3223">[Over all segments with lift capacity]</text><path d="M179.5,225.998 L241.5,225.998 L241.5,232.998 L231.5,242.998 L179.5,242.998 L179.5,225.998 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="135.2207" style="stroke:#000000;stroke-width:2.0;" width="256.5" x="179.5" y="225.998"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="194.5" y="239.5664">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143" x="256.5" y="238.6328">[Current routes available]</text><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="263" y1="260.3086" y2="260.3086"/><line style="stroke:#000000;stroke-width:1.0;" x1="263" x2="263" y1="260.3086" y2="273.3086"/><line style="stroke:#000000;stroke-width:1.0;" x1="222" x2="263" y1="273.3086" y2="273.3086"/><line style="stroke:#000000;stroke-width:1.0;" x1="222" x2="232" y1="273.3086" y2="269.3086"/><line style="stroke:#000000;stroke-width:1.0;" x1="222" x2="232" y1="273.3086" y2="277.3086"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="144" x="228" y="255.7788">Initiate lift request on segment</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="179.5" x2="436" y1="282.3086" y2="282.3086"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="196" x="184.5" y="292.9434">[Stale route found (good or failed)]</text><line style="stroke:#000000;stroke-width:1.0;" x1="377" x2="367" y1="313.2637" y2="309.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="377" x2="367" y1="313.2637" y2="317.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="378" y1="313.2637" y2="313.2637"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="107" x="228" y="308.7339">Request route refresh</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="179.5" x2="436" y1="322.2637" y2="322.2637"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93" x="184.5" y="332.8984">[No route found]</text><line style="stroke:#000000;stroke-width:1.0;" x1="377" x2="367" y1="353.2188" y2="349.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="377" x2="367" y1="353.2188" y2="357.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="378" y1="353.2188" y2="353.2188"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="92" x="228" y="348.689">Request new route</text><path d="M104,380.2188 L104,401.2188 L334,401.2188 L334,390.2188 L324,380.2188 L104,380.2188 " fill="#E8E8EA" filter="url(#f19152e2cvicbv)" style="stroke:#202024;stroke-width:1.0;"/><path d="M324,380.2188 L324,390.2188 L334,390.2188 L324,380.2188 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="209" x="110" y="393.689">route status initially indeterminate (pending)</text><path d="M179.5,417.2188 L241.5,417.2188 L241.5,424.2188 L231.5,434.2188 L179.5,434.2188 L179.5,417.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="158.2656" style="stroke:#000000;stroke-width:2.0;" width="256.5" x="179.5" y="417.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="194.5" y="430.7871">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="256.5" y="429.8535">[Negative response]</text><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="231" y1="451.5293" y2="447.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="231" y1="451.5293" y2="455.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="378" y1="451.5293" y2="451.5293"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="83" x="238" y="446.9995">Route impossible</text><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="263" y1="476.5293" y2="476.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="263" x2="263" y1="476.5293" y2="489.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="222" x2="263" y1="489.5293" y2="489.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="222" x2="232" y1="489.5293" y2="485.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="222" x2="232" y1="489.5293" y2="493.5293"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="107" x="228" y="471.9995">Set route status = bad</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="179.5" x2="436" y1="498.5293" y2="498.5293"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="107" x="184.5" y="509.1641">[Positive response]</text><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="231" y1="529.4844" y2="525.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="231" y1="529.4844" y2="533.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="378" y1="529.4844" y2="529.4844"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="238" y="524.9546">Route good</text><line style="stroke:#000000;stroke-width:1.0;" x1="221" x2="263" y1="554.4844" y2="554.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="263" x2="263" y1="554.4844" y2="567.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="222" x2="263" y1="567.4844" y2="567.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="222" x2="232" y1="567.4844" y2="563.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="222" x2="232" y1="567.4844" y2="571.4844"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="113" x="228" y="549.9546">Set route status = good</text><path d="M147,587.4844 L147,619.4844 L291,619.4844 L291,597.4844 L281,587.4844 L147,587.4844 " fill="#E8E8EA" filter="url(#f19152e2cvicbv)" style="stroke:#202024;stroke-width:1.0;"/><path d="M281,587.4844 L281,597.4844 L291,597.4844 L281,587.4844 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="123" x="153" y="600.9546">routes will eventually time</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="104" x="153" y="611.9546">out and become stale</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="150" x="165.75" y="713.6406">Thu Mar 11 13:51:54 MST 2021</text><!--MD5=[10552744339c8a3feeabe918903b8350]
@startuml
!include common.puml
$title(Automatic Route Discovery)
control "Lift Agent" as agent
database "Local DB" as localDB
database "Upstream DB" as upDB
'database "Downstream DB" as downDB

agent	->	localDB:		Request scan of local segments

note over localDB
  Query for local segments that
  - have lift capacity; and
  - need route attention
end note

loop Over all segments with lift capacity
  alt Current routes available
    localDB	->>	localDB:	Initiate lift request on segment
  
  else Stale route found (good or failed)
    localDB	->>	upDB:		Request route refresh
    
  else No route found
    localDB	->>	upDB:		Request new route
    
  end
end

  note over localDB: route status initially indeterminate (pending)

alt Negative response
  upDB	->>	localDB:		Route impossible
  localDB	->>	localDB:	Set route status = bad
  
else Positive response
  upDB	->>	localDB:		Route good
  localDB	->>	localDB:	Set route status = good

end
  note over localDB: routes will eventually time\nout and become stale
  
@enduml

@startuml



skinparam backgroundColor fff
skinparam stereotypeCBackgroundColor 27d






skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Helvetica
}

skinparam class {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}

skinparam actor {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor cccccc
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam interface {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}



skinparam queue {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 4af
  lifeLineBackgroundColor e0e0e0
}




skinparam state {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
  startColor 4af
  endColor 27d
}

skinparam note {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}







  title Automatic Route Discovery
  footer Thu Mar 11 13:51:54 MST 2021
control "Lift Agent" as agent
database "Local DB" as localDB
database "Upstream DB" as upDB

agent	->	localDB:		Request scan of local segments

note over localDB
  Query for local segments that
  - have lift capacity; and
  - need route attention
end note

loop Over all segments with lift capacity
  alt Current routes available
    localDB	->>	localDB:	Initiate lift request on segment
  
  else Stale route found (good or failed)
    localDB	->>	upDB:		Request route refresh
    
  else No route found
    localDB	->>	upDB:		Request new route
    
  end
end

  note over localDB: route status initially indeterminate (pending)

alt Negative response
  upDB	->>	localDB:		Route impossible
  localDB	->>	localDB:	Set route status = bad
  
else Positive response
  upDB	->>	localDB:		Route good
  localDB	->>	localDB:	Set route status = good

end
  note over localDB: routes will eventually time\nout and become stale
  
@enduml

PlantUML version 1.2021.00(Sun Jan 10 03:25:05 MST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>