@startuml
!include common.puml
$title(Closing a Tally)
actor "Proposer" as prop
database "Proposer DB" as propDB
database "Subject DB" as subjDB
actor "Subject" as subj

prop	->>	propDB:		Request tally be closed
propDB	->>	subjDB:		Mark as closing and notify peer
subjDB	->	subjDB:		Mark as closing
loop until balance == 0
 propDB <->	subjDB:		Participate in lifts
end loop

note over propDB, subjDB
  Tally marked as closing automatically closes when balance hits zero
end note

@enduml
