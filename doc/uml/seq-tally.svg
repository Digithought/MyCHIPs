<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1033px" preserveAspectRatio="none" style="width:575px;height:1033px;background:#FFFFFF;" version="1.1" viewBox="0 0 575 1033" width="575px" zoomAndPan="magnify"><defs><filter height="300%" id="fpp5bl2vkpg5b" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="166" x="202.5" y="29.4023">Establishing a Tally</text><rect fill="#FFFFFF" filter="url(#fpp5bl2vkpg5b)" height="42.3105" style="stroke:#000000;stroke-width:2.0;" width="245" x="316" y="479.1992"/><rect fill="#FFFFFF" filter="url(#fpp5bl2vkpg5b)" height="347.2207" style="stroke:#000000;stroke-width:2.0;" width="551" x="10" y="535.5098"/><rect fill="#FFFFFF" height="164.9551" style="stroke:none;stroke-width:1.0;" width="551" x="10" y="627.8203"/><rect fill="#FFFFFF" height="89.9551" style="stroke:none;stroke-width:1.0;" width="551" x="10" y="792.7754"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="47" x2="47" y1="118.1992" y2="934.7305"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="187.5" x2="187.5" y1="118.1992" y2="934.7305"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="365" x2="365" y1="118.1992" y2="934.7305"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="530" x2="530" y1="118.1992" y2="934.7305"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="48" x="20" y="115.6694">Originator</text><ellipse cx="47" cy="50.1992" fill="#44AAFF" filter="url(#fpp5bl2vkpg5b)" rx="8" ry="8" style="stroke:#2277DD;stroke-width:2.0;"/><path d="M47,58.1992 L47,85.1992 M34,66.1992 L60,66.1992 M47,85.1992 L34,100.1992 M47,85.1992 L60,100.1992 " fill="none" filter="url(#fpp5bl2vkpg5b)" style="stroke:#2277DD;stroke-width:2.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="48" x="20" y="942.2007">Originator</text><ellipse cx="47" cy="954.7305" fill="#44AAFF" filter="url(#fpp5bl2vkpg5b)" rx="8" ry="8" style="stroke:#2277DD;stroke-width:2.0;"/><path d="M47,962.7305 L47,989.7305 M34,970.7305 L60,970.7305 M47,989.7305 L34,1004.7305 M47,989.7305 L60,1004.7305 " fill="none" filter="url(#fpp5bl2vkpg5b)" style="stroke:#2277DD;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="138.5" y="115.2461">Originator DB</text><path d="M170,65.7109 C170,55.7109 188,55.7109 188,55.7109 C188,55.7109 206,55.7109 206,65.7109 L206,91.7109 C206,101.7109 188,101.7109 188,101.7109 C188,101.7109 170,101.7109 170,91.7109 L170,65.7109 " fill="#FEFECE" filter="url(#fpp5bl2vkpg5b)" style="stroke:#000000;stroke-width:1.5;"/><path d="M170,65.7109 C170,75.7109 188,75.7109 188,75.7109 C188,75.7109 206,75.7109 206,65.7109 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="138.5" y="947.2656">Originator DB</text><path d="M170,960.2188 C170,950.2188 188,950.2188 188,950.2188 C188,950.2188 206,950.2188 206,960.2188 L206,986.2188 C206,996.2188 188,996.2188 188,996.2188 C188,996.2188 170,996.2188 170,986.2188 L170,960.2188 " fill="#FEFECE" filter="url(#fpp5bl2vkpg5b)" style="stroke:#000000;stroke-width:1.5;"/><path d="M170,960.2188 C170,970.2188 188,970.2188 188,970.2188 C188,970.2188 206,970.2188 206,960.2188 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="326" y="115.2461">Subject DB</text><path d="M347,65.7109 C347,55.7109 365,55.7109 365,55.7109 C365,55.7109 383,55.7109 383,65.7109 L383,91.7109 C383,101.7109 365,101.7109 365,101.7109 C365,101.7109 347,101.7109 347,91.7109 L347,65.7109 " fill="#FEFECE" filter="url(#fpp5bl2vkpg5b)" style="stroke:#000000;stroke-width:1.5;"/><path d="M347,65.7109 C347,75.7109 365,75.7109 365,75.7109 C365,75.7109 383,75.7109 383,65.7109 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="326" y="947.2656">Subject DB</text><path d="M347,960.2188 C347,950.2188 365,950.2188 365,950.2188 C365,950.2188 383,950.2188 383,960.2188 L383,986.2188 C383,996.2188 365,996.2188 365,996.2188 C365,996.2188 347,996.2188 347,986.2188 L347,960.2188 " fill="#FEFECE" filter="url(#fpp5bl2vkpg5b)" style="stroke:#000000;stroke-width:1.5;"/><path d="M347,960.2188 C347,970.2188 365,970.2188 365,970.2188 C365,970.2188 383,970.2188 383,960.2188 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="36" x="509" y="115.6694">Subject</text><ellipse cx="530" cy="50.1992" fill="#44AAFF" filter="url(#fpp5bl2vkpg5b)" rx="8" ry="8" style="stroke:#2277DD;stroke-width:2.0;"/><path d="M530,58.1992 L530,85.1992 M517,66.1992 L543,66.1992 M530,85.1992 L517,100.1992 M530,85.1992 L543,100.1992 " fill="none" filter="url(#fpp5bl2vkpg5b)" style="stroke:#2277DD;stroke-width:2.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="36" x="509" y="942.2007">Subject</text><ellipse cx="530" cy="954.7305" fill="#44AAFF" filter="url(#fpp5bl2vkpg5b)" rx="8" ry="8" style="stroke:#2277DD;stroke-width:2.0;"/><path d="M530,962.7305 L530,989.7305 M517,970.7305 L543,970.7305 M530,989.7305 L517,1004.7305 M530,989.7305 L543,1004.7305 " fill="none" filter="url(#fpp5bl2vkpg5b)" style="stroke:#2277DD;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="186" x2="176" y1="145.1992" y2="141.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="186" x2="176" y1="145.1992" y2="149.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="187" y1="145.1992" y2="145.1992"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="117" x="54" y="140.6694">Create void tally &amp; ticket</text><path d="M46,158.1992 L46,179.1992 L325,179.1992 L325,168.1992 L315,158.1992 L46,158.1992 " fill="#E8E8EA" filter="url(#fpp5bl2vkpg5b)" style="stroke:#202024;stroke-width:1.0;"/><path d="M315,158.1992 L315,168.1992 L325,168.1992 L315,158.1992 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="258" x="52" y="171.6694">Ticket may be one-time or reusable for multiple peers</text><line style="stroke:#FF0000;stroke-width:1.0;" x1="528" x2="518" y1="205.1992" y2="201.1992"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="528" x2="518" y1="205.1992" y2="209.1992"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="47" x2="529" y1="205.1992" y2="205.1992"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="302" x="54" y="200.6694">Communicate ticket to subject peer via QR code (out-of-band)</text><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="375" y1="230.1992" y2="226.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="375" y1="230.1992" y2="234.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="529" y1="230.1992" y2="230.1992"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="141" x="382" y="225.6694">Request to connect via ticket</text><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="198" y1="277.1992" y2="273.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="198" y1="277.1992" y2="281.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="364" y1="277.1992" y2="277.1992"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="147" x="205" y="250.6694">Is this a known or local agent?</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="153" x="205" y="261.6694">Connect w/ticket or known key,</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="124" x="205" y="272.6694">provide subject certificate</text><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="230" y1="302.1992" y2="302.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="230" x2="230" y1="302.1992" y2="315.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="189" x2="230" y1="315.1992" y2="315.1992"/><polygon fill="#000000" points="199,311.1992,189,315.1992,199,319.1992,195,315.1992" style="stroke:#000000;stroke-width:1.0;"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="142" x="195" y="297.6694">Construct/complete draft tally</text><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="57" y1="340.1992" y2="336.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="57" y1="340.1992" y2="344.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="187" y1="340.1992" y2="340.1992"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="89" x="64" y="335.6694">Present for review</text><line style="stroke:#000000;stroke-width:1.0;" x1="186" x2="176" y1="365.1992" y2="361.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="186" x2="176" y1="365.1992" y2="369.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="187" y1="365.1992" y2="365.1992"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="54" y="360.6694">Accept/sign tally</text><line style="stroke:#000000;stroke-width:1.0;" x1="363" x2="353" y1="390.1992" y2="386.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="363" x2="353" y1="390.1992" y2="394.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="364" y1="390.1992" y2="390.1992"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="134" x="195" y="385.6694">Send proposed, signed tally</text><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="407" y1="426.1992" y2="426.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="407" x2="407" y1="426.1992" y2="439.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="366" x2="407" y1="439.1992" y2="439.1992"/><polygon fill="#000000" points="376,435.1992,366,439.1992,376,443.1992,372,439.1992" style="stroke:#000000;stroke-width:1.0;"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="76" x="372" y="410.6694">Enter draft tally,</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="109" x="372" y="421.6694">check for local partner</text><line style="stroke:#000000;stroke-width:1.0;" x1="528" x2="518" y1="464.1992" y2="460.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="528" x2="518" y1="464.1992" y2="468.1992"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="529" y1="464.1992" y2="464.1992"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="111" x="372" y="459.6694">Present tally for review</text><path d="M316,479.1992 L390,479.1992 L390,486.1992 L380,496.1992 L316,496.1992 L316,479.1992 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="42.3105" style="stroke:#000000;stroke-width:2.0;" width="245" x="316" y="479.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="331" y="492.7676">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="86" x="405" y="491.834">[until satisfied]</text><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="375" y1="513.5098" y2="509.5098"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="375" y1="513.5098" y2="517.5098"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="529" y1="513.5098" y2="513.5098"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="85" x="382" y="508.98">Modify tally terms</text><path d="M10,535.5098 L72,535.5098 L72,542.5098 L62,552.5098 L10,552.5098 L10,535.5098 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="347.2207" style="stroke:#000000;stroke-width:2.0;" width="551" x="10" y="535.5098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="549.0781">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="101" x="87" y="548.1445">[Terms agreeable]</text><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="375" y1="569.8203" y2="565.8203"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="375" y1="569.8203" y2="573.8203"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="529" y1="569.8203" y2="569.8203"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="382" y="565.2905">Accept/sign tally</text><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="198" y1="594.8203" y2="590.8203"/><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="198" y1="594.8203" y2="598.8203"/><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="364" y1="594.8203" y2="594.8203"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="95" x="205" y="590.2905">Send accepted tally</text><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="57" y1="619.8203" y2="615.8203"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="57" y1="619.8203" y2="623.8203"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="187" y1="619.8203" y2="619.8203"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="101" x="64" y="615.2905">Store and notify user</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="561" y1="628.8203" y2="628.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96" x="15" y="639.4551">[Want to counter]</text><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="375" y1="659.7754" y2="655.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="375" y1="659.7754" y2="663.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="529" y1="659.7754" y2="659.7754"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="64" x="382" y="655.2456">Counter offer</text><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="198" y1="684.7754" y2="680.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="198" y1="684.7754" y2="688.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="364" y1="684.7754" y2="684.7754"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="96" x="205" y="680.2456">Send proposed tally</text><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="57" y1="709.7754" y2="705.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="57" y1="709.7754" y2="713.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="187" y1="709.7754" y2="709.7754"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="89" x="64" y="705.2456">Present for review</text><line style="stroke:#000000;stroke-width:1.0;" x1="186" x2="176" y1="734.7754" y2="730.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="186" x2="176" y1="734.7754" y2="738.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="187" y1="734.7754" y2="734.7754"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="54" y="730.2456">Accept/sign tally</text><line style="stroke:#000000;stroke-width:1.0;" x1="363" x2="353" y1="759.7754" y2="755.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="363" x2="353" y1="759.7754" y2="763.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="364" y1="759.7754" y2="759.7754"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="95" x="195" y="755.2456">Send accepted tally</text><line style="stroke:#000000;stroke-width:1.0;" x1="528" x2="518" y1="784.7754" y2="780.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="528" x2="518" y1="784.7754" y2="788.7754"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="529" y1="784.7754" y2="784.7754"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="101" x="372" y="780.2456">Store and notify user</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="561" y1="793.7754" y2="793.7754"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="82" x="15" y="804.4102">[Refuse terms]</text><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="375" y1="824.7305" y2="820.7305"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="375" y1="824.7305" y2="828.7305"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="529" y1="824.7305" y2="824.7305"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="102" x="382" y="820.2007">Mark tally as refused</text><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="198" y1="849.7305" y2="845.7305"/><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="198" y1="849.7305" y2="853.7305"/><line style="stroke:#000000;stroke-width:1.0;" x1="188" x2="364" y1="849.7305" y2="849.7305"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="95" x="205" y="845.2007">Send accepted tally</text><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="57" y1="874.7305" y2="870.7305"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="57" y1="874.7305" y2="878.7305"/><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="187" y1="874.7305" y2="874.7305"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="101" x="64" y="870.2007">Store and notify user</text><path d="M146,894.7305 L146,915.7305 L406,915.7305 L406,904.7305 L396,894.7305 L146,894.7305 " fill="#E8E8EA" filter="url(#fpp5bl2vkpg5b)" style="stroke:#202024;stroke-width:1.0;"/><path d="M396,894.7305 L396,904.7305 L406,904.7305 L396,894.7305 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="220" x="159.75" y="908.2007">Signed tally can now be used for transactions</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="143" x="214" y="1025.3984">Sat Jan 29 15:14:13 MST 2022</text><!--MD5=[7136152130d3afc6bf1d5915ef717287]
@startuml
!include common.puml
$title(Establishing a Tally)
actor "Originator" as prop
database "Originator DB" as propDB
database "Subject DB" as subjDB
actor "Subject" as subj

prop	->>	propDB:		Create void tally & ticket
note over propDB
  Ticket may be one-time or reusable for multiple peers
end note
prop	-[#red]>> subj:		Communicate ticket to subject peer via QR code (out-of-band)
subj	->>	subjDB:		Request to connect via ticket
subjDB	->>	propDB:		Is this a known or local agent?\nConnect w/ticket or known key,\nprovide subject certificate
propDB	->	propDB:		Construct/complete draft tally
propDB	->>	prop:		Present for review
prop	->>	propDB:		Accept/sign tally
propDB	->>	subjDB:		Send proposed, signed tally
subjDB	->	subjDB:		Enter draft tally,\ncheck for local partner
subjDB	->>	subj:		Present tally for review
loop until satisfied
 subj	->>	subjDB:		Modify tally terms
end loop

alt Terms agreeable
 subj	->>	subjDB:		Accept/sign tally
 subjDB ->>	propDB:		Send accepted tally
 propDB	->>	prop:		Store and notify user

else Want to counter
 subj	->>	subjDB:		Counter offer
 subjDB	->>	propDB:		Send proposed tally
 propDB	->>	prop:		Present for review
 prop	->>	propDB:		Accept/sign tally
 propDB	->>	subjDB:		Send accepted tally
 subjDB	->>	subj:		Store and notify user

else Refuse terms
 subj	->>	subjDB:		Mark tally as refused
 subjDB ->>	propDB:		Send accepted tally
 propDB	->>	prop:		Store and notify user
end

note over propDB, subjDB
  Signed tally can now be used for transactions
end note

@enduml

@startuml



skinparam backgroundColor fff
skinparam stereotypeCBackgroundColor 27d






skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Helvetica
}

skinparam class {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}

skinparam actor {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor cccccc
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam interface {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}



skinparam queue {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 4af
  lifeLineBackgroundColor e0e0e0
}




skinparam state {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
  startColor 4af
  endColor 27d
}

skinparam note {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}







  title Establishing a Tally
  footer Sat Jan 29 15:14:13 MST 2022
actor "Originator" as prop
database "Originator DB" as propDB
database "Subject DB" as subjDB
actor "Subject" as subj

prop	->>	propDB:		Create void tally & ticket
note over propDB
  Ticket may be one-time or reusable for multiple peers
end note
prop	-[#red]>> subj:		Communicate ticket to subject peer via QR code (out-of-band)
subj	->>	subjDB:		Request to connect via ticket
subjDB	->>	propDB:		Is this a known or local agent?\nConnect w/ticket or known key,\nprovide subject certificate
propDB	->	propDB:		Construct/complete draft tally
propDB	->>	prop:		Present for review
prop	->>	propDB:		Accept/sign tally
propDB	->>	subjDB:		Send proposed, signed tally
subjDB	->	subjDB:		Enter draft tally,\ncheck for local partner
subjDB	->>	subj:		Present tally for review
loop until satisfied
 subj	->>	subjDB:		Modify tally terms
end loop

alt Terms agreeable
 subj	->>	subjDB:		Accept/sign tally
 subjDB ->>	propDB:		Send accepted tally
 propDB	->>	prop:		Store and notify user

else Want to counter
 subj	->>	subjDB:		Counter offer
 subjDB	->>	propDB:		Send proposed tally
 propDB	->>	prop:		Present for review
 prop	->>	propDB:		Accept/sign tally
 propDB	->>	subjDB:		Send accepted tally
 subjDB	->>	subj:		Store and notify user

else Refuse terms
 subj	->>	subjDB:		Mark tally as refused
 subjDB ->>	propDB:		Send accepted tally
 propDB	->>	prop:		Store and notify user
end

note over propDB, subjDB
  Signed tally can now be used for transactions
end note

@enduml

PlantUML version 1.2021.12(Tue Oct 05 10:01:58 MDT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>