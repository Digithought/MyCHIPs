<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="734px" preserveAspectRatio="none" style="width:513px;height:734px;background:#FFFFFF;" version="1.1" viewBox="0 0 513 734" width="513px" zoomAndPan="magnify"><defs><filter height="300%" id="fb88gf9j55kqc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="195" x="157.25" y="29.4023">Route Query Response</text><rect fill="#FFFFFF" filter="url(#fb88gf9j55kqc)" height="164.5313" style="stroke:#000000;stroke-width:2.0;" width="464.5" x="35" y="144.6875"/><rect fill="#FFFFFF" height="39.9551" style="stroke:none;stroke-width:1.0;" width="464.5" x="35" y="186.998"/><rect fill="#FFFFFF" height="82.2656" style="stroke:none;stroke-width:1.0;" width="464.5" x="35" y="226.9531"/><rect fill="#FFFFFF" filter="url(#fb88gf9j55kqc)" height="53.3105" style="stroke:#000000;stroke-width:2.0;" width="306" x="183.5" y="248.9082"/><rect fill="#FFFFFF" filter="url(#fb88gf9j55kqc)" height="229.2656" style="stroke:#000000;stroke-width:2.0;" width="434" x="10" y="358.2188"/><rect fill="#FFFFFF" height="102.9551" style="stroke:none;stroke-width:1.0;" width="434" x="10" y="484.5293"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="102" x2="102" y1="102.6875" y2="650.4844"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="224.5" x2="224.5" y1="102.6875" y2="650.4844"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="352" x2="352" y1="102.6875" y2="650.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="45" y="99.7344">Downstream DB</text><path d="M84,50.1992 C84,40.1992 102,40.1992 102,40.1992 C102,40.1992 120,40.1992 120,50.1992 L120,76.1992 C120,86.1992 102,86.1992 102,86.1992 C102,86.1992 84,86.1992 84,76.1992 L84,50.1992 " fill="#FEFECE" filter="url(#fb88gf9j55kqc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M84,50.1992 C84,60.1992 102,60.1992 102,60.1992 C102,60.1992 120,60.1992 120,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="45" y="663.0195">Downstream DB</text><path d="M84,675.9727 C84,665.9727 102,665.9727 102,665.9727 C102,665.9727 120,665.9727 120,675.9727 L120,701.9727 C120,711.9727 102,711.9727 102,711.9727 C102,711.9727 84,711.9727 84,701.9727 L84,675.9727 " fill="#FEFECE" filter="url(#fb88gf9j55kqc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M84,675.9727 C84,685.9727 102,685.9727 102,685.9727 C102,685.9727 120,685.9727 120,675.9727 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="193.5" y="99.7344">Local DB</text><path d="M207,50.1992 C207,40.1992 225,40.1992 225,40.1992 C225,40.1992 243,40.1992 243,50.1992 L243,76.1992 C243,86.1992 225,86.1992 225,86.1992 C225,86.1992 207,86.1992 207,76.1992 L207,50.1992 " fill="#FEFECE" filter="url(#fb88gf9j55kqc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M207,50.1992 C207,60.1992 225,60.1992 225,60.1992 C225,60.1992 243,60.1992 243,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="193.5" y="663.0195">Local DB</text><path d="M207,675.9727 C207,665.9727 225,665.9727 225,665.9727 C225,665.9727 243,665.9727 243,675.9727 L243,701.9727 C243,711.9727 225,711.9727 225,711.9727 C225,711.9727 207,711.9727 207,701.9727 L207,675.9727 " fill="#FEFECE" filter="url(#fb88gf9j55kqc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M207,675.9727 C207,685.9727 225,685.9727 225,685.9727 C225,685.9727 243,685.9727 243,675.9727 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="305" y="99.7344">Upstream DB</text><path d="M334,50.1992 C334,40.1992 352,40.1992 352,40.1992 C352,40.1992 370,40.1992 370,50.1992 L370,76.1992 C370,86.1992 352,86.1992 352,86.1992 C352,86.1992 334,86.1992 334,76.1992 L334,50.1992 " fill="#FEFECE" filter="url(#fb88gf9j55kqc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M334,50.1992 C334,60.1992 352,60.1992 352,60.1992 C352,60.1992 370,60.1992 370,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="305" y="663.0195">Upstream DB</text><path d="M334,675.9727 C334,665.9727 352,665.9727 352,665.9727 C352,665.9727 370,665.9727 370,675.9727 L370,701.9727 C370,711.9727 352,711.9727 352,711.9727 C352,711.9727 334,711.9727 334,701.9727 L334,675.9727 " fill="#FEFECE" filter="url(#fb88gf9j55kqc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M334,675.9727 C334,685.9727 352,685.9727 352,685.9727 C352,685.9727 370,685.9727 370,675.9727 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.0;" x1="223" x2="213" y1="129.6875" y2="125.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="223" x2="213" y1="129.6875" y2="133.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="102" x2="224" y1="129.6875" y2="129.6875"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="99" x="109" y="125.1577">Receive route query</text><path d="M35,144.6875 L97,144.6875 L97,151.6875 L87,161.6875 L35,161.6875 L35,144.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="164.5313" style="stroke:#000000;stroke-width:2.0;" width="464.5" x="35" y="144.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="50" y="158.2559">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180" x="112" y="157.3223">[Route impossible via this path]</text><line style="stroke:#000000;stroke-width:1.0;" x1="102" x2="112" y1="178.998" y2="174.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="102" x2="112" y1="178.998" y2="182.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="102" x2="224" y1="178.998" y2="178.998"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="90" x="119" y="174.4683">Reply action: none</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="35" x2="499.5" y1="187.998" y2="187.998"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="178" x="40" y="198.6328">[Destination peer found locally]</text><line style="stroke:#000000;stroke-width:1.0;" x1="102" x2="112" y1="218.9531" y2="214.9531"/><line style="stroke:#000000;stroke-width:1.0;" x1="102" x2="112" y1="218.9531" y2="222.9531"/><line style="stroke:#000000;stroke-width:1.0;" x1="102" x2="224" y1="218.9531" y2="218.9531"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="90" x="119" y="214.4233">Reply action: good</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="35" x2="499.5" y1="227.9531" y2="227.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="200" x="40" y="238.5879">[Destination peer not found locally]</text><path d="M183.5,248.9082 L257.5,248.9082 L257.5,255.9082 L247.5,265.9082 L183.5,265.9082 L183.5,248.9082 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="53.3105" style="stroke:#000000;stroke-width:2.0;" width="306" x="183.5" y="248.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="198.5" y="262.4766">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="212" x="272.5" y="261.543">[On upstream peers with lift capacity]</text><line style="stroke:#000000;stroke-width:1.0;" x1="350" x2="340" y1="294.2188" y2="290.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="350" x2="340" y1="294.2188" y2="298.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="225" x2="351" y1="294.2188" y2="294.2188"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="100" x="232" y="278.689">Create draft route(s)</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="80" x="232" y="289.689">Query upstream</text><path d="M120,321.2188 L120,342.2188 L325,342.2188 L325,331.2188 L315,321.2188 L120,321.2188 " fill="#E8E8EA" filter="url(#fb88gf9j55kqc)" style="stroke:#202024;stroke-width:1.0;"/><path d="M315,321.2188 L315,331.2188 L325,331.2188 L315,321.2188 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="184" x="126" y="334.689">new route status indeterminate (pend)</text><path d="M10,358.2188 L72,358.2188 L72,365.2188 L62,375.2188 L10,375.2188 L10,358.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="229.2656" style="stroke:#000000;stroke-width:2.0;" width="434" x="10" y="358.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="371.7871">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="87" y="370.8535">[Negative response]</text><line style="stroke:#000000;stroke-width:1.0;" x1="225" x2="235" y1="392.5293" y2="388.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="225" x2="235" y1="392.5293" y2="396.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="225" x2="351" y1="392.5293" y2="392.5293"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="83" x="242" y="387.9995">Route impossible</text><line style="stroke:#000000;stroke-width:1.0;" x1="225" x2="267" y1="417.5293" y2="417.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="267" x2="267" y1="417.5293" y2="430.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="226" x2="267" y1="430.5293" y2="430.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="226" x2="236" y1="430.5293" y2="426.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="226" x2="236" y1="430.5293" y2="434.5293"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="113" x="232" y="412.9995">Set route status = none</text><path d="M20,443.5293 L20,475.5293 L430,475.5293 L430,453.5293 L420,443.5293 L20,443.5293 " fill="#E8E8EA" filter="url(#fb88gf9j55kqc)" style="stroke:#202024;stroke-width:1.0;"/><path d="M420,443.5293 L420,453.5293 L430,453.5293 L420,443.5293 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="389" x="26" y="456.9995">No downstream failure reply is made because there may be multiple such routes</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="310" x="26" y="467.9995">at this level, all leading back through the same downstream tally.</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="444" y1="485.5293" y2="485.5293"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="107" x="15" y="496.1641">[Positive response]</text><line style="stroke:#000000;stroke-width:1.0;" x1="225" x2="235" y1="516.4844" y2="512.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="225" x2="235" y1="516.4844" y2="520.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="225" x2="351" y1="516.4844" y2="516.4844"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="242" y="511.9546">Route good</text><line style="stroke:#000000;stroke-width:1.0;" x1="225" x2="267" y1="541.4844" y2="541.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="267" x2="267" y1="541.4844" y2="554.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="226" x2="267" y1="554.4844" y2="554.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="226" x2="236" y1="554.4844" y2="550.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="226" x2="236" y1="554.4844" y2="558.4844"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="113" x="232" y="536.9546">Set route status = good</text><line style="stroke:#000000;stroke-width:1.0;" x1="102" x2="112" y1="579.4844" y2="575.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="102" x2="112" y1="579.4844" y2="583.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="102" x2="224" y1="579.4844" y2="579.4844"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="90" x="119" y="574.9546">Reply action: good</text><path d="M151,599.4844 L151,631.4844 L295,631.4844 L295,609.4844 L285,599.4844 L151,599.4844 " fill="#E8E8EA" filter="url(#fb88gf9j55kqc)" style="stroke:#202024;stroke-width:1.0;"/><path d="M285,599.4844 L285,609.4844 L295,609.4844 L285,599.4844 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="123" x="157" y="612.9546">routes will eventually time</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="117" x="157" y="623.9546">out and become expired</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155" x="177.25" y="725.6406">Mon Mar 14 09:36:09 MDT 2022</text><!--MD5=[f263f61c47635c4a6e7ddd9d5874ffe6]
@startuml
!include common.puml
$title(Route Query Response)
database "Downstream DB" as downDB
database "Local DB" as localDB
database "Upstream DB" as upDB

downDB	->>	localDB:	Receive route query

alt Route impossible via this path
  localDB	->>	downDB:	Reply action: none

else Destination peer found locally
  localDB	->>	downDB:	Reply action: good

else Destination peer not found locally
  loop On upstream peers with lift capacity
    localDB	->>	upDB: Create draft route(s)\nQuery upstream
  end
end

  note over localDB: new route status indeterminate (pend)
  
alt Negative response
  upDB	->>	localDB:		Route impossible
  localDB	->>	localDB:	Set route status = none
'  localDB	->>	downDB:	Reply action: none
  note over downDB, upDB: No downstream failure reply is made because there may be multiple such routes\nat this level, all leading back through the same downstream tally.
  
else Positive response
  upDB	->>	localDB:		Route good
  localDB	->>	localDB:	Set route status = good
  localDB	->>	downDB:	Reply action: good

end
  note over localDB: routes will eventually time\nout and become expired

@enduml

@startuml



skinparam backgroundColor fff
skinparam stereotypeCBackgroundColor 27d






skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Helvetica
}

skinparam class {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}

skinparam actor {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor cccccc
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam interface {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}



skinparam queue {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 4af
  lifeLineBackgroundColor e0e0e0
}




skinparam state {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
  startColor 4af
  endColor 27d
}

skinparam note {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}







  title Route Query Response
  footer Mon Mar 14 09:36:09 MDT 2022
database "Downstream DB" as downDB
database "Local DB" as localDB
database "Upstream DB" as upDB

downDB	->>	localDB:	Receive route query

alt Route impossible via this path
  localDB	->>	downDB:	Reply action: none

else Destination peer found locally
  localDB	->>	downDB:	Reply action: good

else Destination peer not found locally
  loop On upstream peers with lift capacity
    localDB	->>	upDB: Create draft route(s)\nQuery upstream
  end
end

  note over localDB: new route status indeterminate (pend)
  
alt Negative response
  upDB	->>	localDB:		Route impossible
  localDB	->>	localDB:	Set route status = none
  note over downDB, upDB: No downstream failure reply is made because there may be multiple such routes\nat this level, all leading back through the same downstream tally.
  
else Positive response
  upDB	->>	localDB:		Route good
  localDB	->>	localDB:	Set route status = good
  localDB	->>	downDB:	Reply action: good

end
  note over localDB: routes will eventually time\nout and become expired

@enduml

PlantUML version 1.2022.1(Tue Feb 01 11:19:58 MST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>