<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="713px" preserveAspectRatio="none" style="width:488px;height:713px;background:#FFFFFF;" version="1.1" viewBox="0 0 488 713" width="488px" zoomAndPan="magnify"><defs><filter height="300%" id="f1prcxlpv5rlzc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="195" x="144.75" y="29.4023">Route Query Response</text><rect fill="#FFFFFF" filter="url(#f1prcxlpv5rlzc)" height="164.5313" style="stroke:#000000;stroke-width:2.0;" width="464.5" x="10" y="144.6875"/><rect fill="#FFFFFF" height="39.9551" style="stroke:none;stroke-width:1.0;" width="464.5" x="10" y="186.998"/><rect fill="#FFFFFF" height="82.2656" style="stroke:none;stroke-width:1.0;" width="464.5" x="10" y="226.9531"/><rect fill="#FFFFFF" filter="url(#f1prcxlpv5rlzc)" height="53.3105" style="stroke:#000000;stroke-width:2.0;" width="306" x="158.5" y="248.9082"/><rect fill="#FFFFFF" filter="url(#f1prcxlpv5rlzc)" height="208.2656" style="stroke:#000000;stroke-width:2.0;" width="377" x="10" y="358.2188"/><rect fill="#FFFFFF" height="102.9551" style="stroke:none;stroke-width:1.0;" width="377" x="10" y="463.5293"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="77" x2="77" y1="102.6875" y2="629.4844"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="199.5" x2="199.5" y1="102.6875" y2="629.4844"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="330" x2="330" y1="102.6875" y2="629.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="20" y="99.7344">Downstream DB</text><path d="M59,50.1992 C59,40.1992 77,40.1992 77,40.1992 C77,40.1992 95,40.1992 95,50.1992 L95,76.1992 C95,86.1992 77,86.1992 77,86.1992 C77,86.1992 59,86.1992 59,76.1992 L59,50.1992 " fill="#FEFECE" filter="url(#f1prcxlpv5rlzc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M59,50.1992 C59,60.1992 77,60.1992 77,60.1992 C77,60.1992 95,60.1992 95,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="20" y="642.0195">Downstream DB</text><path d="M59,654.9727 C59,644.9727 77,644.9727 77,644.9727 C77,644.9727 95,644.9727 95,654.9727 L95,680.9727 C95,690.9727 77,690.9727 77,690.9727 C77,690.9727 59,690.9727 59,680.9727 L59,654.9727 " fill="#FEFECE" filter="url(#f1prcxlpv5rlzc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M59,654.9727 C59,664.9727 77,664.9727 77,664.9727 C77,664.9727 95,664.9727 95,654.9727 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="168.5" y="99.7344">Local DB</text><path d="M182,50.1992 C182,40.1992 200,40.1992 200,40.1992 C200,40.1992 218,40.1992 218,50.1992 L218,76.1992 C218,86.1992 200,86.1992 200,86.1992 C200,86.1992 182,86.1992 182,76.1992 L182,50.1992 " fill="#FEFECE" filter="url(#f1prcxlpv5rlzc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M182,50.1992 C182,60.1992 200,60.1992 200,60.1992 C200,60.1992 218,60.1992 218,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="168.5" y="642.0195">Local DB</text><path d="M182,654.9727 C182,644.9727 200,644.9727 200,644.9727 C200,644.9727 218,644.9727 218,654.9727 L218,680.9727 C218,690.9727 200,690.9727 200,690.9727 C200,690.9727 182,690.9727 182,680.9727 L182,654.9727 " fill="#FEFECE" filter="url(#f1prcxlpv5rlzc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M182,654.9727 C182,664.9727 200,664.9727 200,664.9727 C200,664.9727 218,664.9727 218,654.9727 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="283" y="99.7344">Upstream DB</text><path d="M312,50.1992 C312,40.1992 330,40.1992 330,40.1992 C330,40.1992 348,40.1992 348,50.1992 L348,76.1992 C348,86.1992 330,86.1992 330,86.1992 C330,86.1992 312,86.1992 312,76.1992 L312,50.1992 " fill="#FEFECE" filter="url(#f1prcxlpv5rlzc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M312,50.1992 C312,60.1992 330,60.1992 330,60.1992 C330,60.1992 348,60.1992 348,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="283" y="642.0195">Upstream DB</text><path d="M312,654.9727 C312,644.9727 330,644.9727 330,644.9727 C330,644.9727 348,644.9727 348,654.9727 L348,680.9727 C348,690.9727 330,690.9727 330,690.9727 C330,690.9727 312,690.9727 312,680.9727 L312,654.9727 " fill="#FEFECE" filter="url(#f1prcxlpv5rlzc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M312,654.9727 C312,664.9727 330,664.9727 330,664.9727 C330,664.9727 348,664.9727 348,654.9727 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.0;" x1="198" x2="188" y1="129.6875" y2="125.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="198" x2="188" y1="129.6875" y2="133.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="199" y1="129.6875" y2="129.6875"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="99" x="84" y="125.1577">Receive route query</text><path d="M10,144.6875 L72,144.6875 L72,151.6875 L62,161.6875 L10,161.6875 L10,144.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="164.5313" style="stroke:#000000;stroke-width:2.0;" width="464.5" x="10" y="144.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="158.2559">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180" x="87" y="157.3223">[Route impossible via this path]</text><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="87" y1="178.998" y2="174.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="87" y1="178.998" y2="182.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="199" y1="178.998" y2="178.998"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="94" y="174.4683">Reply action: fail</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="474.5" y1="187.998" y2="187.998"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="178" x="15" y="198.6328">[Destination peer found locally]</text><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="87" y1="218.9531" y2="214.9531"/><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="87" y1="218.9531" y2="222.9531"/><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="199" y1="218.9531" y2="218.9531"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="93" x="94" y="214.4233">Reply action: affirm</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="474.5" y1="227.9531" y2="227.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="200" x="15" y="238.5879">[Destination peer not found locally]</text><path d="M158.5,248.9082 L232.5,248.9082 L232.5,255.9082 L222.5,265.9082 L158.5,265.9082 L158.5,248.9082 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="53.3105" style="stroke:#000000;stroke-width:2.0;" width="306" x="158.5" y="248.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="173.5" y="262.4766">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="212" x="247.5" y="261.543">[On upstream peers with lift capacity]</text><line style="stroke:#000000;stroke-width:1.0;" x1="328" x2="318" y1="294.2188" y2="290.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="328" x2="318" y1="294.2188" y2="298.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="200" x2="329" y1="294.2188" y2="294.2188"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="100" x="207" y="278.689">Create draft route(s)</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="80" x="207" y="289.689">Query upstream</text><path d="M88,321.2188 L88,342.2188 L307,342.2188 L307,331.2188 L297,321.2188 L88,321.2188 " fill="#E8E8EA" filter="url(#f1prcxlpv5rlzc)" style="stroke:#202024;stroke-width:1.0;"/><path d="M297,321.2188 L297,331.2188 L307,331.2188 L297,321.2188 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="198" x="94" y="334.689">new route status indeterminate (pending)</text><path d="M10,358.2188 L72,358.2188 L72,365.2188 L62,375.2188 L10,375.2188 L10,358.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="208.2656" style="stroke:#000000;stroke-width:2.0;" width="377" x="10" y="358.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="371.7871">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="87" y="370.8535">[Negative response]</text><line style="stroke:#000000;stroke-width:1.0;" x1="200" x2="210" y1="392.5293" y2="388.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="200" x2="210" y1="392.5293" y2="396.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="200" x2="329" y1="392.5293" y2="392.5293"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="83" x="217" y="387.9995">Route impossible</text><line style="stroke:#000000;stroke-width:1.0;" x1="200" x2="242" y1="417.5293" y2="417.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="242" x2="242" y1="417.5293" y2="430.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="201" x2="242" y1="430.5293" y2="430.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="201" x2="211" y1="430.5293" y2="426.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="201" x2="211" y1="430.5293" y2="434.5293"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="102" x="207" y="412.9995">Set route status = fail</text><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="87" y1="455.5293" y2="451.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="87" y1="455.5293" y2="459.5293"/><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="199" y1="455.5293" y2="455.5293"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="94" y="450.9995">Reply action: fail</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="387" y1="464.5293" y2="464.5293"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="107" x="15" y="475.1641">[Positive response]</text><line style="stroke:#000000;stroke-width:1.0;" x1="200" x2="210" y1="495.4844" y2="491.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="200" x2="210" y1="495.4844" y2="499.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="200" x2="329" y1="495.4844" y2="495.4844"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="217" y="490.9546">Route good</text><line style="stroke:#000000;stroke-width:1.0;" x1="200" x2="242" y1="520.4844" y2="520.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="242" x2="242" y1="520.4844" y2="533.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="201" x2="242" y1="533.4844" y2="533.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="201" x2="211" y1="533.4844" y2="529.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="201" x2="211" y1="533.4844" y2="537.4844"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="116" x="207" y="515.9546">Set route status = affirm</text><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="87" y1="558.4844" y2="554.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="87" y1="558.4844" y2="562.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="77" x2="199" y1="558.4844" y2="558.4844"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="93" x="94" y="553.9546">Reply action: affirm</text><path d="M126,578.4844 L126,610.4844 L270,610.4844 L270,588.4844 L260,578.4844 L126,578.4844 " fill="#E8E8EA" filter="url(#f1prcxlpv5rlzc)" style="stroke:#202024;stroke-width:1.0;"/><path d="M260,578.4844 L260,588.4844 L270,588.4844 L260,578.4844 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="123" x="132" y="591.9546">routes will eventually time</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="104" x="132" y="602.9546">out and become stale</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="150" x="167.25" y="704.6406">Tue Mar 01 12:01:43 MST 2022</text><!--MD5=[21d476c9f28066dbf87f4ab5cbad7813]
@startuml
!include common.puml
$title(Route Query Response)
database "Downstream DB" as downDB
database "Local DB" as localDB
database "Upstream DB" as upDB

'collections "Other Peers on Network" as net

downDB	->>	localDB:	Receive route query

alt Route impossible via this path
  localDB	->>	downDB:	Reply action: fail

else Destination peer found locally
  localDB	->>	downDB:	Reply action: affirm

else Destination peer not found locally
  loop On upstream peers with lift capacity
    localDB	->>	upDB: Create draft route(s)\nQuery upstream
  end
end

  note over localDB: new route status indeterminate (pending)
  
alt Negative response
  upDB	->>	localDB:		Route impossible
  localDB	->>	localDB:	Set route status = fail
  localDB	->>	downDB:	Reply action: fail
  
else Positive response
  upDB	->>	localDB:		Route good
  localDB	->>	localDB:	Set route status = affirm
  localDB	->>	downDB:	Reply action: affirm

end
  note over localDB: routes will eventually time\nout and become stale

@enduml

@startuml



skinparam backgroundColor fff
skinparam stereotypeCBackgroundColor 27d






skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Helvetica
}

skinparam class {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}

skinparam actor {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor cccccc
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam interface {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}



skinparam queue {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 4af
  lifeLineBackgroundColor e0e0e0
}




skinparam state {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
  startColor 4af
  endColor 27d
}

skinparam note {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}







  title Route Query Response
  footer Tue Mar 01 12:01:43 MST 2022
database "Downstream DB" as downDB
database "Local DB" as localDB
database "Upstream DB" as upDB


downDB	->>	localDB:	Receive route query

alt Route impossible via this path
  localDB	->>	downDB:	Reply action: fail

else Destination peer found locally
  localDB	->>	downDB:	Reply action: affirm

else Destination peer not found locally
  loop On upstream peers with lift capacity
    localDB	->>	upDB: Create draft route(s)\nQuery upstream
  end
end

  note over localDB: new route status indeterminate (pending)
  
alt Negative response
  upDB	->>	localDB:		Route impossible
  localDB	->>	localDB:	Set route status = fail
  localDB	->>	downDB:	Reply action: fail
  
else Positive response
  upDB	->>	localDB:		Route good
  localDB	->>	localDB:	Set route status = affirm
  localDB	->>	downDB:	Reply action: affirm

end
  note over localDB: routes will eventually time\nout and become stale

@enduml

PlantUML version 1.2022.1(Tue Feb 01 11:19:58 MST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>