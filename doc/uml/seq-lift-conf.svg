<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="787px" preserveAspectRatio="none" style="width:616px;height:787px;" version="1.1" viewBox="0 0 616 787" width="616px" zoomAndPan="magnify"><defs><filter height="300%" id="f459mrw9m8ef1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="256" x="180" y="29.4023">Lift Confirmation/Ratification</text><rect fill="#FFFFFF" filter="url(#f459mrw9m8ef1)" height="446.5313" style="stroke:#000000;stroke-width:2.0;" width="583" x="10" y="240.6875"/><rect fill="#FFFFFF" height="354.2207" style="stroke:none;stroke-width:1.0;" width="583" x="10" y="332.998"/><rect fill="#FFFFFF" filter="url(#f459mrw9m8ef1)" height="300.2656" style="stroke:#000000;stroke-width:2.0;" width="563" x="20" y="379.9531"/><rect fill="#FFFFFF" height="114.9551" style="stroke:none;stroke-width:1.0;" width="563" x="20" y="565.2637"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="58" x2="58" y1="102.6875" y2="704.2188"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="200" x2="200" y1="102.6875" y2="704.2188"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="363" x2="363" y1="102.6875" y2="704.2188"/><line style="stroke:#44AAFF;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="526" x2="526" y1="102.6875" y2="704.2188"/><rect fill="#E8E8EA" filter="url(#f459mrw9m8ef1)" height="25" style="stroke:#202024;stroke-width:1.5;" width="53" x="30" y="72.6875"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="39" x="37" y="88.1577">Referee</text><rect fill="#E8E8EA" filter="url(#f459mrw9m8ef1)" height="25" style="stroke:#202024;stroke-width:1.5;" width="53" x="30" y="703.2188"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="39" x="37" y="718.689">Referee</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="151" y="99.7344">Originator DB</text><path d="M182.5,50.1992 C182.5,40.1992 200.5,40.1992 200.5,40.1992 C200.5,40.1992 218.5,40.1992 218.5,50.1992 L218.5,76.1992 C218.5,86.1992 200.5,86.1992 200.5,86.1992 C200.5,86.1992 182.5,86.1992 182.5,76.1992 L182.5,50.1992 " fill="#FEFECE" filter="url(#f459mrw9m8ef1)" style="stroke:#000000;stroke-width:1.5;"/><path d="M182.5,50.1992 C182.5,60.1992 200.5,60.1992 200.5,60.1992 C200.5,60.1992 218.5,60.1992 218.5,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="151" y="716.7539">Originator DB</text><path d="M182.5,729.707 C182.5,719.707 200.5,719.707 200.5,719.707 C200.5,719.707 218.5,719.707 218.5,729.707 L218.5,755.707 C218.5,765.707 200.5,765.707 200.5,765.707 C200.5,765.707 182.5,765.707 182.5,755.707 L182.5,729.707 " fill="#FEFECE" filter="url(#f459mrw9m8ef1)" style="stroke:#000000;stroke-width:1.5;"/><path d="M182.5,729.707 C182.5,739.707 200.5,739.707 200.5,739.707 C200.5,739.707 218.5,739.707 218.5,729.707 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#E8E8EA" filter="url(#f459mrw9m8ef1)" height="25" style="stroke:#202024;stroke-width:1.5;" width="107" x="310" y="68.6875"/><rect fill="#E8E8EA" filter="url(#f459mrw9m8ef1)" height="25" style="stroke:#202024;stroke-width:1.5;" width="107" x="306" y="72.6875"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="93" x="313" y="88.1577">Intermediate nodes</text><rect fill="#E8E8EA" filter="url(#f459mrw9m8ef1)" height="25" style="stroke:#202024;stroke-width:1.5;" width="107" x="310" y="703.2188"/><rect fill="#E8E8EA" filter="url(#f459mrw9m8ef1)" height="25" style="stroke:#202024;stroke-width:1.5;" width="107" x="306" y="707.2188"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="93" x="313" y="722.689">Intermediate nodes</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="480" y="99.7344">Terminus DB</text><path d="M508.5,50.1992 C508.5,40.1992 526.5,40.1992 526.5,40.1992 C526.5,40.1992 544.5,40.1992 544.5,50.1992 L544.5,76.1992 C544.5,86.1992 526.5,86.1992 526.5,86.1992 C526.5,86.1992 508.5,86.1992 508.5,76.1992 L508.5,50.1992 " fill="#FEFECE" filter="url(#f459mrw9m8ef1)" style="stroke:#000000;stroke-width:1.5;"/><path d="M508.5,50.1992 C508.5,60.1992 526.5,60.1992 526.5,60.1992 C526.5,60.1992 544.5,60.1992 544.5,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="480" y="716.7539">Terminus DB</text><path d="M508.5,729.707 C508.5,719.707 526.5,719.707 526.5,719.707 C526.5,719.707 544.5,719.707 544.5,729.707 L544.5,755.707 C544.5,765.707 526.5,765.707 526.5,765.707 C526.5,765.707 508.5,765.707 508.5,755.707 L508.5,729.707 " fill="#FEFECE" filter="url(#f459mrw9m8ef1)" style="stroke:#000000;stroke-width:1.5;"/><path d="M508.5,729.707 C508.5,739.707 526.5,739.707 526.5,739.707 C526.5,739.707 544.5,739.707 544.5,729.707 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.0;" x1="361.5" x2="351.5" y1="129.6875" y2="125.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="361.5" x2="351.5" y1="129.6875" y2="133.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="362.5" y1="129.6875" y2="129.6875"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="129" x="207.5" y="125.1577">Will you participate in a lift?</text><line style="stroke:#000000;stroke-width:1.0;" x1="524.5" x2="514.5" y1="154.6875" y2="150.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="524.5" x2="514.5" y1="154.6875" y2="158.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="363.5" x2="525.5" y1="154.6875" y2="154.6875"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="129" x="370.5" y="150.1577">Will you participate in a lift?</text><path d="M442,167.6875 L442,188.6875 L607,188.6875 L607,177.6875 L597,167.6875 L442,167.6875 " fill="#E8E8EA" filter="url(#f459mrw9m8ef1)" style="stroke:#202024;stroke-width:1.0;"/><path d="M597,167.6875 L597,177.6875 L607,177.6875 L597,167.6875 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="144" x="448" y="181.1577">The destination is a local user</text><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="210.5" y1="225.6875" y2="221.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="210.5" y1="225.6875" y2="229.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="525.5" y1="225.6875" y2="225.6875"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="92" x="217.5" y="210.1577">Terminus reached;</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="59" x="217.5" y="221.1577">authenticate</text><path d="M10,240.6875 L72,240.6875 L72,247.6875 L62,257.6875 L10,257.6875 L10,240.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="446.5313" style="stroke:#000000;stroke-width:2.0;" width="583" x="10" y="240.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="254.2559">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="320" x="87" y="253.3223">[Originator wants to cancel (or thinks the lift is expired)]</text><line style="stroke:#000000;stroke-width:1.0;" x1="524.5" x2="514.5" y1="274.998" y2="270.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="524.5" x2="514.5" y1="274.998" y2="278.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="525.5" y1="274.998" y2="274.998"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="47" x="207.5" y="270.4683">Cancel lift</text><line style="stroke:#000000;stroke-width:1.0;" x1="363.5" x2="373.5" y1="299.998" y2="295.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="363.5" x2="373.5" y1="299.998" y2="303.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="363.5" x2="525.5" y1="299.998" y2="299.998"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="47" x="380.5" y="295.4683">Cancel lift</text><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="210.5" y1="324.998" y2="320.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="210.5" y1="324.998" y2="328.998"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="362.5" y1="324.998" y2="324.998"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="47" x="217.5" y="320.4683">Cancel lift</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="593" y1="333.998" y2="333.998"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="240" x="15" y="344.6328">[Originator still wants to proceed with lift]</text><line style="stroke:#000000;stroke-width:1.0;" x1="58.5" x2="68.5" y1="364.9531" y2="360.9531"/><line style="stroke:#000000;stroke-width:1.0;" x1="58.5" x2="68.5" y1="364.9531" y2="368.9531"/><line style="stroke:#000000;stroke-width:1.0;" x1="58.5" x2="199.5" y1="364.9531" y2="364.9531"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="104" x="75.5" y="360.4233">May I commit this lift?</text><path d="M20,379.9531 L82,379.9531 L82,386.9531 L72,396.9531 L20,396.9531 L20,379.9531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="300.2656" style="stroke:#000000;stroke-width:2.0;" width="563" x="20" y="379.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="393.5215">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="121" x="97" y="392.5879">[Lift still within time]</text><line style="stroke:#000000;stroke-width:1.0;" x1="198.5" x2="188.5" y1="414.2637" y2="410.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="198.5" x2="188.5" y1="414.2637" y2="418.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="58.5" x2="199.5" y1="414.2637" y2="414.2637"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="118" x="65.5" y="409.7339">OK, here's my signature</text><path d="M91,427.2637 L91,481.2637 L305,481.2637 L305,437.2637 L295,427.2637 L91,427.2637 " fill="#E8E8EA" filter="url(#f459mrw9m8ef1)" style="stroke:#202024;stroke-width:1.0;"/><path d="M295,427.2637 L295,437.2637 L305,437.2637 L295,427.2637 " fill="#E8E8EA" style="stroke:#202024;stroke-width:1.0;"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="193" x="97" y="440.7339">Lift is now irrevocably good and binding.</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="181" x="97" y="451.7339">The signature is a liability to any node</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="174" x="97" y="462.7339">who doesn't deploy it (because their</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="160" x="97" y="473.7339">upstream neighbor probably will).</text><line style="stroke:#000000;stroke-width:1.0;" x1="524.5" x2="514.5" y1="507.2637" y2="503.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="524.5" x2="514.5" y1="507.2637" y2="511.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="525.5" y1="507.2637" y2="507.2637"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="139" x="207.5" y="502.7339">Commit; here's the signature</text><line style="stroke:#000000;stroke-width:1.0;" x1="363.5" x2="373.5" y1="532.2637" y2="528.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="363.5" x2="373.5" y1="532.2637" y2="536.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="363.5" x2="525.5" y1="532.2637" y2="532.2637"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="139" x="380.5" y="527.7339">Commit; here's the signature</text><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="210.5" y1="557.2637" y2="553.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="210.5" y1="557.2637" y2="561.2637"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="362.5" y1="557.2637" y2="557.2637"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="139" x="217.5" y="552.7339">Commit; here's the signature</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="583" y1="566.2637" y2="566.2637"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="159" x="25" y="576.8984">[Lift judged to have expired]</text><line style="stroke:#000000;stroke-width:1.0;" x1="198.5" x2="188.5" y1="597.2188" y2="593.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="198.5" x2="188.5" y1="597.2188" y2="601.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="58.5" x2="199.5" y1="597.2188" y2="597.2188"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="82" x="65.5" y="592.689">Sorry, lift expired</text><line style="stroke:#000000;stroke-width:1.0;" x1="524.5" x2="514.5" y1="622.2188" y2="618.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="524.5" x2="514.5" y1="622.2188" y2="626.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="525.5" y1="622.2188" y2="622.2188"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="47" x="207.5" y="617.689">Cancel lift</text><line style="stroke:#000000;stroke-width:1.0;" x1="363.5" x2="373.5" y1="647.2188" y2="643.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="363.5" x2="373.5" y1="647.2188" y2="651.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="363.5" x2="525.5" y1="647.2188" y2="647.2188"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="47" x="380.5" y="642.689">Cancel lift</text><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="210.5" y1="672.2188" y2="668.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="210.5" y1="672.2188" y2="676.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="200.5" x2="362.5" y1="672.2188" y2="672.2188"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="47" x="217.5" y="667.689">Cancel lift</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="145" x="235.5" y="779.375">Thu Jul 01 15:51:34 MDT 2021</text><!--MD5=[eb59ea4d17409a05215efc817d692149]
@startuml
!include common.puml
$title(Lift Confirmation/Ratification)
participant "Referee" as referee
database "Originator DB" as propDB
collections "Intermediate nodes" as inter
database "Terminus DB" as termDB

propDB		->>	inter:		Will you participate in a lift?
inter		->>	termDB:		Will you participate in a lift?

note over termDB: The destination is a local user
termDB		->>	propDB:		Terminus reached;\nauthenticate

alt Originator wants to cancel (or thinks the lift is expired)
  propDB	->>	termDB:		Cancel lift
  termDB	->>	inter:		Cancel lift
  inter		->>	propDB:		Cancel lift

else Originator still wants to proceed with lift
  propDB	->>	referee:	May I commit this lift?

  alt Lift still within time
    referee	->>	propDB:		OK, here's my signature
    note over propDB
      Lift is now irrevocably good and binding.
      The signature is a liability to any node
      who doesn't deploy it (because their 
      upstream neighbor probably will).
    end note
    
    propDB	->>	termDB:		Commit; here's the signature
    termDB	->>	inter:		Commit; here's the signature
    inter	->>	propDB:		Commit; here's the signature

  else Lift judged to have expired
    referee	->>	propDB:		Sorry, lift expired
    propDB	->>	termDB:		Cancel lift
    termDB	->>	inter:		Cancel lift
    inter	->>	propDB:		Cancel lift
  end

end
  
@enduml

@startuml



skinparam backgroundColor fff
skinparam stereotypeCBackgroundColor 27d






skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Helvetica
}

skinparam class {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}

skinparam actor {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor cccccc
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam interface {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}



skinparam queue {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 4af
  lifeLineBackgroundColor e0e0e0
}




skinparam state {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
  startColor 4af
  endColor 27d
}

skinparam note {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}







  title Lift Confirmation/Ratification
  footer Thu Jul 01 15:51:34 MDT 2021
participant "Referee" as referee
database "Originator DB" as propDB
collections "Intermediate nodes" as inter
database "Terminus DB" as termDB

propDB		->>	inter:		Will you participate in a lift?
inter		->>	termDB:		Will you participate in a lift?

note over termDB: The destination is a local user
termDB		->>	propDB:		Terminus reached;\nauthenticate

alt Originator wants to cancel (or thinks the lift is expired)
  propDB	->>	termDB:		Cancel lift
  termDB	->>	inter:		Cancel lift
  inter		->>	propDB:		Cancel lift

else Originator still wants to proceed with lift
  propDB	->>	referee:	May I commit this lift?

  alt Lift still within time
    referee	->>	propDB:		OK, here's my signature
    note over propDB
      Lift is now irrevocably good and binding.
      The signature is a liability to any node
      who doesn't deploy it (because their 
      upstream neighbor probably will).
    end note
    
    propDB	->>	termDB:		Commit; here's the signature
    termDB	->>	inter:		Commit; here's the signature
    inter	->>	propDB:		Commit; here's the signature

  else Lift judged to have expired
    referee	->>	propDB:		Sorry, lift expired
    propDB	->>	termDB:		Cancel lift
    termDB	->>	inter:		Cancel lift
    inter	->>	propDB:		Cancel lift
  end

end
  
@enduml

PlantUML version 1.2021.00(Sun Jan 10 03:25:05 MST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>